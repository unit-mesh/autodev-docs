<!doctype html>
<html lang="en-US" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-local-agent/custom-variable" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Custom Variable | AutoDev - Tailor Your AI Coding Experience</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://ide.unitmesh.cc/en/local-agent/custom-variable"><meta data-rh="true" property="og:locale" content="en_US"><meta data-rh="true" property="og:locale:alternate" content="zh_CN"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Custom Variable | AutoDev - Tailor Your AI Coding Experience"><meta data-rh="true" name="description" content="Shire 自定义变量的核心是 Variable -&gt; Pattern-Action 模型。在 Shire 中，Pattern-Action 模型是一种用于处理数据的模式匹配和动作执行模型。"><meta data-rh="true" property="og:description" content="Shire 自定义变量的核心是 Variable -&gt; Pattern-Action 模型。在 Shire 中，Pattern-Action 模型是一种用于处理数据的模式匹配和动作执行模型。"><link data-rh="true" rel="icon" href="/en/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://ide.unitmesh.cc/en/local-agent/custom-variable"><link data-rh="true" rel="alternate" href="https://ide.unitmesh.cc/en/local-agent/custom-variable" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://ide.unitmesh.cc/local-agent/custom-variable" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://ide.unitmesh.cc/local-agent/custom-variable" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/en/blog/rss.xml" title="AutoDev - Tailor Your AI Coding Experience RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/en/blog/atom.xml" title="AutoDev - Tailor Your AI Coding Experience Atom Feed"><link rel="stylesheet" href="/en/assets/css/styles.e089f9ae.css">
<script src="/en/assets/js/runtime~main.6d9c4151.js" defer="defer"></script>
<script src="/en/assets/js/main.50575558.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/en/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/en/"><div class="navbar__logo"><img src="/en/img/logo.svg" alt="AutoDev Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/en/img/logo.svg" alt="AutoDev Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">AutoDev</b></a><a class="navbar__item navbar__link" href="/en/intro">Docs</a><a class="navbar__item navbar__link" href="/en/customize">Customize</a><a class="navbar__item navbar__link" href="/en/development">Development</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/en/agent">Agentic Coding</a><a class="navbar__item navbar__link" href="/en/blog">Blog</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/en/local-agent/custom-variable" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en-US">English</a></li><li><a href="/local-agent/custom-variable" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-CN">简体中文</a></li></ul></div><a href="https://github.com/unit-mesh/auto-dev" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/agent">Agentic Coding</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/en/agent/remote">Remote Agents</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/en/local-agent">Local Agents</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/local-agent">本地智能体</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/local-agent/builtin-variable">Builtin Variable</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/en/local-agent/custom-variable">Custom Variable</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/local-agent/env">Environment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/local-agent/foreign-function">Foreign Function</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/local-agent/hobbit-hole">Config (Hobbit Hole)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/local-agent/template">Command &amp; Template</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/local-agent/toolchain-function">Toolchain Function</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/local-agent/toolchain-variable">Toolchain Variable</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/local-agent/when">Condition Visible</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/en/mcp">MCP</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/en/devins">AI Agent Language</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Local Agents</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Custom Variable</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Custom Variable</h1></header><p>Shire 自定义变量的核心是 Variable -&gt; Pattern-Action 模型。在 Shire 中，Pattern-Action 模型是一种用于处理数据的模式匹配和动作执行模型。
如下图所示：</p>
<p><img decoding="async" loading="lazy" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTAxMXB4IiBoZWlnaHQ9IjMxNnB4IiB2aWV3Qm94PSIwIDAgMTAxMSAzMTYiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDYyICg5MTM5MCkgLSBodHRwczovL3NrZXRjaC5jb20gLS0+CiAgICA8dGl0bGU+R3JvdXA8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iR3JvdXAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuMDAwMDAwLCAtNi4wMDAwMDApIj4KICAgICAgICAgICAgPHRleHQgaWQ9IiZxdW90O3NvdXJjZUNvZGUmcXVvdDs6LS8uKkNvbiIgZm9udC1mYW1pbHk9Ik5vdG9TZXJpZlNDLUJvbGQsIE5vdG8gU2VyaWYgU0MiIGZvbnQtc2l6ZT0iMTgiIGZvbnQtd2VpZ2h0PSJib2xkIj4KICAgICAgICAgICAgICAgIDx0c3BhbiB4PSI5IiB5PSIyMzciIGZpbGw9IiMwODdEMTgiPiJzb3VyY2VDb2RlIjwvdHNwYW4+CiAgICAgICAgICAgICAgICA8dHNwYW4geD0iMTMwLjYwOCIgeT0iMjM3IiBmaWxsPSIjMDExQzMyIj46IC88L3RzcGFuPgogICAgICAgICAgICAgICAgPHRzcGFuIHg9IjE0NS43MjgiIHk9IjIzNyIgZmlsbD0iIzQ4QTE3OCI+LipDb250cm9sbGVyLmphdmE8L3RzcGFuPgogICAgICAgICAgICAgICAgPHRzcGFuIHg9IjI5My40NzIiIHk9IjIzNyIgZmlsbD0iIzAxMUMzMiI+LyA8L3RzcGFuPgogICAgICAgICAgICAgICAgPHRzcGFuIHg9IjMwNS4xNTQiIHk9IjIzNyIgZmlsbD0iIzAwMDAwMCIgZmlsbC1vcGFjaXR5PSIwLjUiPns8L3RzcGFuPgogICAgICAgICAgICAgICAgPHRzcGFuIHg9IjMxMS45OTQiIHk9IjIzNyIgZmlsbD0iIzAxMUMzMiI+IDwvdHNwYW4+CiAgICAgICAgICAgICAgICA8dHNwYW4geD0iMzE2LjUxMiIgeT0iMjM3IiBmaWxsPSIjREE0MTY3Ij5wcmludDwvdHNwYW4+CiAgICAgICAgICAgICAgICA8dHNwYW4geD0iMzYyLjg2MiIgeT0iMjM3IiBmaWxsPSIjMDExQzMyIj4oPC90c3Bhbj4KICAgICAgICAgICAgICAgIDx0c3BhbiB4PSIzNzAuMDI2IiB5PSIyMzciIGZpbGw9IiMwMDMyQjMiPiRmaWxlUGF0aDwvdHNwYW4+CiAgICAgICAgICAgICAgICA8dHNwYW4geD0iNDUwLjY4NCIgeT0iMjM3IiBmaWxsPSIjMDExQzMyIj4pIDwvdHNwYW4+CiAgICAgICAgICAgICAgICA8dHNwYW4geD0iNDYyLjM2NiIgeT0iMjM3IiBmaWxsPSIjQ0M4NTBBIj58PC90c3Bhbj4KICAgICAgICAgICAgICAgIDx0c3BhbiB4PSI0NjcuNjIyIiB5PSIyMzciIGZpbGw9IiMwMTFDMzIiPiA8L3RzcGFuPgogICAgICAgICAgICAgICAgPHRzcGFuIHg9IjQ3Mi4xNCIgeT0iMjM3IiBmaWxsPSIjREE0MTY3Ij5zZWQ8L3RzcGFuPgogICAgICAgICAgICAgICAgPHRzcGFuIHg9IjUwMy4xNTQiIHk9IjIzNyIgZmlsbD0iIzAxMUMzMiI+KDwvdHNwYW4+CiAgICAgICAgICAgICAgICA8dHNwYW4geD0iNTEwLjMxOCIgeT0iMjM3IiBmaWxsPSIjNDhBMTc4Ij4ic3JjXC90ZXN0XC8iPC90c3Bhbj4KICAgICAgICAgICAgICAgIDx0c3BhbiB4PSI2MTEuOTEiIHk9IjIzNyIgZmlsbD0iIzAxMUMzMiI+LDwvdHNwYW4+CiAgICAgICAgICAgICAgICA8dHNwYW4geD0iNjE3Ljk0IiB5PSIyMzciIGZpbGw9IiMwMTNENEYiPiAic3JjL21haW4vIjwvdHNwYW4+CiAgICAgICAgICAgICAgICA8dHNwYW4geD0iNzI2LjAxMiIgeT0iMjM3IiBmaWxsPSIjMDExQzMyIj4pIDwvdHNwYW4+CiAgICAgICAgICAgICAgICA8dHNwYW4geD0iNzM3LjY5NCIgeT0iMjM3IiBmaWxsPSIjQ0M4NTBBIj58PC90c3Bhbj4KICAgICAgICAgICAgICAgIDx0c3BhbiB4PSI3NDIuOTUiIHk9IjIzNyIgZmlsbD0iIzAxMUMzMiI+IDwvdHNwYW4+CiAgICAgICAgICAgICAgICA8dHNwYW4geD0iNzQ3LjQ2OCIgeT0iMjM3IiBmaWxsPSIjREE0MTY3Ij5zZWQ8L3RzcGFuPgogICAgICAgICAgICAgICAgPHRzcGFuIHg9Ijc3OC40ODIiIHk9IjIzNyIgZmlsbD0iIzAxMUMzMiI+KDwvdHNwYW4+CiAgICAgICAgICAgICAgICA8dHNwYW4geD0iNzg1LjY0NiIgeT0iMjM3IiBmaWxsPSIjNDhBMTc4Ij4iVGVzdC5qYXZhIjwvdHNwYW4+CiAgICAgICAgICAgICAgICA8dHNwYW4geD0iODc4LjQzNiIgeT0iMjM3IiBmaWxsPSIjMDExQzMyIj4sICIuamF2YSIpIHwgPC90c3Bhbj4KICAgICAgICAgICAgICAgIDx0c3BhbiB4PSI5NjUuNTc0IiB5PSIyMzciIGZpbGw9IiNEQTQxNjciPmNhdDwvdHNwYW4+CiAgICAgICAgICAgICAgICA8dHNwYW4geD0iOTkzLjA0MiIgeT0iMjM3IiBmaWxsPSIjMDExQzMyIj4gPC90c3Bhbj4KICAgICAgICAgICAgICAgIDx0c3BhbiB4PSI5OTcuNTYiIHk9IjIzNyIgZmlsbD0iIzAwMDAwMCIgZmlsbC1vcGFjaXR5PSIwLjUiPn08L3RzcGFuPgogICAgICAgICAgICA8L3RleHQ+CiAgICAgICAgICAgIDxwYXRoIGlkPSJMaW5lIiBkPSJNNjYsMTU0IEw2NiwyMDIuOTMyIEw3MC44Nzg0MjQ1LDE5NC4yNTk3MzkgTDcxLjM2ODY4NTcsMTkzLjM4ODE2MyBMNzMuMTExODM2OCwxOTQuMzY4Njg2IEw3Mi42MjE1NzU1LDE5NS4yNDAyNjEgTDY1Ljg3MTU3NTUsMjA3LjI0MDI2MSBMNjUsMjA4Ljc4OTcyOSBMNjQuMTI4NDI0NSwyMDcuMjQwMjYxIEw1Ny4zNzg0MjQ1LDE5NS4yNDAyNjEgTDU2Ljg4ODE2MzIsMTk0LjM2ODY4NiBMNTguNjMxMzE0MywxOTMuMzg4MTYzIEw1OS4xMjE1NzU1LDE5NC4yNTk3MzkgTDY0LDIwMi45MzIgTDY0LDE1NCBMNjYsMTU0IFoiIGZpbGw9IiMwODdEMTgiIGZpbGwtcnVsZT0ibm9uemVybyI+PC9wYXRoPgogICAgICAgICAgICA8cGF0aCBpZD0iTGluZSIgZD0iTTM1MSwxMDcgTDM1MSwxOTguOTMyIEwzNTUuODc4NDI0LDE5MC4yNTk3MzkgTDM1Ni4zNjg2ODYsMTg5LjM4ODE2MyBMMzU4LjExMTgzNywxOTAuMzY4Njg2IEwzNTcuNjIxNTc2LDE5MS4yNDAyNjEgTDM1MC44NzE1NzYsMjAzLjI0MDI2MSBMMzUwLDIwNC43ODk3MjkgTDM0OS4xMjg0MjQsMjAzLjI0MDI2MSBMMzQyLjM3ODQyNCwxOTEuMjQwMjYxIEwzNDEuODg4MTYzLDE5MC4zNjg2ODYgTDM0My42MzEzMTQsMTg5LjM4ODE2MyBMMzQ0LjEyMTU3NiwxOTAuMjU5NzM5IEwzNDksMTk4LjkzMiBMMzQ5LDEwNyBMMzUxLDEwNyBaIiBmaWxsPSIjREE0MTY3IiBmaWxsLXJ1bGU9Im5vbnplcm8iPjwvcGF0aD4KICAgICAgICAgICAgPHBhdGggaWQ9IkxpbmUiIGQ9Ik00MjksNjMgTDQyOSwxOTguOTMyIEw0MzMuODc4NDI0LDE5MC4yNTk3MzkgTDQzNC4zNjg2ODYsMTg5LjM4ODE2MyBMNDM2LjExMTgzNywxOTAuMzY4Njg2IEw0MzUuNjIxNTc2LDE5MS4yNDAyNjEgTDQyOC44NzE1NzYsMjAzLjI0MDI2MSBMNDI4LDIwNC43ODk3MjkgTDQyNy4xMjg0MjQsMjAzLjI0MDI2MSBMNDIwLjM3ODQyNCwxOTEuMjQwMjYxIEw0MTkuODg4MTYzLDE5MC4zNjg2ODYgTDQyMS42MzEzMTQsMTg5LjM4ODE2MyBMNDIyLjEyMTU3NiwxOTAuMjU5NzM5IEw0MjcsMTk4LjkzMiBMNDI3LDYzIEw0MjksNjMgWiIgZmlsbD0iIzAwMzJCMyIgZmlsbC1ydWxlPSJub256ZXJvIj48L3BhdGg+CiAgICAgICAgICAgIDxwYXRoIGlkPSJMaW5lIiBkPSJNMjQzLDE1MCBMMjQzLDE5OC45MzIgTDI0Ny44Nzg0MjQsMTkwLjI1OTczOSBMMjQ4LjM2ODY4NiwxODkuMzg4MTYzIEwyNTAuMTExODM3LDE5MC4zNjg2ODYgTDI0OS42MjE1NzYsMTkxLjI0MDI2MSBMMjQyLjg3MTU3NiwyMDMuMjQwMjYxIEwyNDIsMjA0Ljc4OTcyOSBMMjQxLjEyODQyNCwyMDMuMjQwMjYxIEwyMzQuMzc4NDI0LDE5MS4yNDAyNjEgTDIzMy44ODgxNjMsMTkwLjM2ODY4NiBMMjM1LjYzMTMxNCwxODkuMzg4MTYzIEwyMzYuMTIxNTc2LDE5MC4yNTk3MzkgTDI0MSwxOTguOTMyIEwyNDEsMTUwIEwyNDMsMTUwIFoiIGZpbGw9IiM0OEExNzgiIGZpbGwtcnVsZT0ibm9uemVybyI+PC9wYXRoPgogICAgICAgICAgICA8cGF0aCBpZD0iTGluZSIgZD0iTTU2NSwxNTQgTDU2NSwyMDIuOTMyIEw1NjkuODc4NDI0LDE5NC4yNTk3MzkgTDU3MC4zNjg2ODYsMTkzLjM4ODE2MyBMNTcyLjExMTgzNywxOTQuMzY4Njg2IEw1NzEuNjIxNTc2LDE5NS4yNDAyNjEgTDU2NC44NzE1NzYsMjA3LjI0MDI2MSBMNTY0LDIwOC43ODk3MjkgTDU2My4xMjg0MjQsMjA3LjI0MDI2MSBMNTU2LjM3ODQyNCwxOTUuMjQwMjYxIEw1NTUuODg4MTYzLDE5NC4zNjg2ODYgTDU1Ny42MzEzMTQsMTkzLjM4ODE2MyBMNTU4LjEyMTU3NiwxOTQuMjU5NzM5IEw1NjMsMjAyLjkzMiBMNTYzLDE1NCBMNTY1LDE1NCBaIiBmaWxsPSIjNDhBMTc4IiBmaWxsLXJ1bGU9Im5vbnplcm8iPjwvcGF0aD4KICAgICAgICAgICAgPHBhdGggaWQ9IkxpbmUiIGQ9Ik00NzYsMTUwIEw0NzYsMTk4LjkzMiBMNDgwLjg3ODQyNCwxOTAuMjU5NzM5IEw0ODEuMzY4Njg2LDE4OS4zODgxNjMgTDQ4My4xMTE4MzcsMTkwLjM2ODY4NiBMNDgyLjYyMTU3NiwxOTEuMjQwMjYxIEw0NzUuODcxNTc2LDIwMy4yNDAyNjEgTDQ3NSwyMDQuNzg5NzI5IEw0NzQuMTI4NDI0LDIwMy4yNDAyNjEgTDQ2Ny4zNzg0MjQsMTkxLjI0MDI2MSBMNDY2Ljg4ODE2MywxOTAuMzY4Njg2IEw0NjguNjMxMzE0LDE4OS4zODgxNjMgTDQ2OS4xMjE1NzYsMTkwLjI1OTczOSBMNDc0LDE5OC45MzIgTDQ3NCwxNTAgTDQ3NiwxNTAgWiIgZmlsbD0iI0NDODUwQSIgZmlsbC1ydWxlPSJub256ZXJvIj48L3BhdGg+CiAgICAgICAgICAgIDx0ZXh0IGlkPSJjdXN0b20tdmFyaWFibGUiIGZvbnQtZmFtaWx5PSJOb3RvU2VyaWZTQy1Cb2xkLCBOb3RvIFNlcmlmIFNDIiBmb250LXNpemU9IjE4IiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iIzA4N0QxOCI+CiAgICAgICAgICAgICAgICA8dHNwYW4geD0iMCIgeT0iMTI5Ij5jdXN0b20gdmFyaWFibGU8L3RzcGFuPgogICAgICAgICAgICA8L3RleHQ+CiAgICAgICAgICAgIDx0ZXh0IGlkPSJmdW5jdGlvbi1uYW1lIiBmb250LWZhbWlseT0iTm90b1NlcmlmU0MtQm9sZCwgTm90byBTZXJpZiBTQyIgZm9udC1zaXplPSIxOCIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IiNEQTQxNjciPgogICAgICAgICAgICAgICAgPHRzcGFuIHg9IjI3MiIgeT0iOTEiPmZ1bmN0aW9uIG5hbWU8L3RzcGFuPgogICAgICAgICAgICA8L3RleHQ+CiAgICAgICAgICAgIDx0ZXh0IGlkPSJmdW5jdGlvbi1hcmctKHZhcmlhYiIgZm9udC1mYW1pbHk9Ik5vdG9TZXJpZlNDLUJvbGQsIE5vdG8gU2VyaWYgU0MiIGZvbnQtc2l6ZT0iMTgiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjMDAzMkIzIj4KICAgICAgICAgICAgICAgIDx0c3BhbiB4PSIzNzMiIHk9IjIxIj5mdW5jdGlvbiBhcmc8L3RzcGFuPgogICAgICAgICAgICAgICAgPHRzcGFuIHg9IjM3MyIgeT0iNDciPih2YXJpYWJsZSBhcmcpPC90c3Bhbj4KICAgICAgICAgICAgPC90ZXh0PgogICAgICAgICAgICA8dGV4dCBpZD0iZnVuY3Rpb24tYXJnIiBmb250LWZhbWlseT0iTm90b1NlcmlmU0MtQm9sZCwgTm90byBTZXJpZiBTQyIgZm9udC1zaXplPSIxOCIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IiM0OEExNzgiPgogICAgICAgICAgICAgICAgPHRzcGFuIHg9IjUwOCIgeT0iMTI5Ij5mdW5jdGlvbiBhcmc8L3RzcGFuPgogICAgICAgICAgICA8L3RleHQ+CiAgICAgICAgICAgIDx0ZXh0IGlkPSJwaXBlIiBmb250LWZhbWlseT0iTm90b1NlcmlmU0MtQm9sZCwgTm90byBTZXJpZiBTQyIgZm9udC1zaXplPSIxOCIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IiNDQzg1MEEiPgogICAgICAgICAgICAgICAgPHRzcGFuIHg9IjQ1NSIgeT0iMTI5Ij5waXBlPC90c3Bhbj4KICAgICAgICAgICAgPC90ZXh0PgogICAgICAgICAgICA8dGV4dCBpZD0iZmlsZS1yZWdleC1wYXR0ZXJuIiBmb250LWZhbWlseT0iTm90b1NlcmlmU0MtQm9sZCwgTm90byBTZXJpZiBTQyIgZm9udC1zaXplPSIxOCIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IiM0OEExNzgiPgogICAgICAgICAgICAgICAgPHRzcGFuIHg9IjE2NCIgeT0iMTI5Ij5maWxlIHJlZ2V4IHBhdHRlcm48L3RzcGFuPgogICAgICAgICAgICA8L3RleHQ+CiAgICAgICAgICAgIDxsaW5lIHgxPSIxNDIiIHkxPSIyNzUiIHgyPSIyOTEiIHkyPSIyNzUiIGlkPSJMaW5lLTIiIHN0cm9rZT0iIzQ4QTE3OCIgc3Ryb2tlLXdpZHRoPSI0IiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIj48L2xpbmU+CiAgICAgICAgICAgIDxsaW5lIHgxPSIzMTAiIHkxPSIyNzUiIHgyPSIxMDA5IiB5Mj0iMjc2IiBpZD0iTGluZS0yIiBzdHJva2U9IiMxQzI3NEMiIHN0cm9rZS13aWR0aD0iNCIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSI+PC9saW5lPgogICAgICAgICAgICA8dGV4dCBpZD0icGF0dGVybiIgZm9udC1mYW1pbHk9Ik5vdG9TZXJpZlNDLUJvbGQsIE5vdG8gU2VyaWYgU0MiIGZvbnQtc2l6ZT0iMTgiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjNDhBMTc4Ij4KICAgICAgICAgICAgICAgIDx0c3BhbiB4PSIxNTAiIHk9IjMxMiI+cGF0dGVybjwvdHNwYW4+CiAgICAgICAgICAgIDwvdGV4dD4KICAgICAgICAgICAgPHRleHQgaWQ9InZhcmlhYmxlIiBmb250LWZhbWlseT0iTm90b1NlcmlmU0MtQm9sZCwgTm90byBTZXJpZiBTQyIgZm9udC1zaXplPSIxOCIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IiMwODdEMTgiPgogICAgICAgICAgICAgICAgPHRzcGFuIHg9IjMxIiB5PSIzMTciPnZhcmlhYmxlPC90c3Bhbj4KICAgICAgICAgICAgPC90ZXh0PgogICAgICAgICAgICA8dGV4dCBpZD0iYWN0aW9ucy0oLXBpcGVsaW5lLWEiIGZvbnQtZmFtaWx5PSJOb3RvU2VyaWZTQy1Cb2xkLCBOb3RvIFNlcmlmIFNDIiBmb250LXNpemU9IjE4IiBmb250LXdlaWdodD0iYm9sZCI+CiAgICAgICAgICAgICAgICA8dHNwYW4geD0iMzIxIiB5PSIzMTciIGZpbGw9IiM0OEExNzgiPmFjdGlvbnMgKCA8L3RzcGFuPgogICAgICAgICAgICAgICAgPHRzcGFuIHg9IjQwMy4yOTYiIHk9IjMxNyIgZmlsbD0iI0NDODUwQSI+cGlwZTwvdHNwYW4+CiAgICAgICAgICAgICAgICA8dHNwYW4geD0iNDQzLjU2MiIgeT0iMzE3IiBmaWxsPSIjNDhBMTc4Ij5saW5lIGFjdGlvbiApPC90c3Bhbj4KICAgICAgICAgICAgPC90ZXh0PgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+" width="1011" height="316" class="img_ev3q"></p>
<ul>
<li>variable 是用户自定义的变量。</li>
<li>pattern 是用于筛选输入数据的规则或标准，可以是一组文件名模式、正则表达式，用于识别哪些数据需要进一步处理。</li>
<li>action 是当数据符合 pattern 时需要执行的任务，由一系列命令组成，描述了如何处理匹配的数据。<!-- -->
<ul>
<li>function name 是 Shire 内置的函数，用于处理数据。</li>
<li>arguments 是函数的参数，用于传递数据。</li>
<li>pipe(<code>|</code>) 是用于连接多个操作的管道操作符，每个操作都是一个函数，其输出作为下一个函数的输入。</li>
</ul>
</li>
</ul>
<p>Custom Variable 的三种实现方式：</p>
<div class="language-shire codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shire codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variables:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;var1&quot;: &quot;demo&quot; // Value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;var2&quot;: /.*.java/ { find(&quot;error.log&quot;) | sort | xargs(&quot;rm&quot;)} // Pattern-Action</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;var3&quot;: /.*.log/ {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    case &quot;$0&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;error&quot; { find(&quot;ERROR&quot;) | sort | xargs(&quot;notify_admin&quot;) }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;warn&quot; { find(&quot;WARN&quot;) | sort | xargs(&quot;notify_admin&quot;) }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;info&quot; { find(&quot;INFO&quot;) | sort | xargs(&quot;notify_user&quot;) }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      default  { find(&quot;ERROR&quot;) | sort | xargs(&quot;notify_admin&quot;) }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>多变量示例：</p>
<div class="language-shire codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shire codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name: &quot;类图分析&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variables:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;controllers&quot;: /.*.java/ { cat }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;tokens&quot;: /any/ { tokenizer($controllers, &quot;word&quot;) }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;chinese&quot;: /any/ { tokenizer(&quot;孩子上了幼儿园 安全防拐教育要做好&quot;, &quot;jieba&quot;) }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$controllers</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>在这个示例中，我们在 tokens 变量中使用了 controllers 变量的值，这样就可以在变量之间传递数据。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="shire-常规自定义变量">Shire 常规自定义变量<a href="#shire-常规自定义变量" class="hash-link" aria-label="Direct link to Shire 常规自定义变量" title="Direct link to Shire 常规自定义变量">​</a></h2>
<p>常规自定义变量，可以用于：</p>
<ul>
<li>对应不同类型文件，自定义 prompt。</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="variable-pattern-action">Variable Pattern Action<a href="#variable-pattern-action" class="hash-link" aria-label="Direct link to Variable Pattern Action" title="Direct link to Variable Pattern Action">​</a></h2>
<p>在Shire中，我们借鉴了 Unix/Linux 的设计理念和 Shell 编程模式，特别是 Pattern-Action 模型。该模型通过定义模式和动作来处理数据：</p>
<ol>
<li><strong>模式（Pattern）</strong>：这代表用于筛选输入数据的规则或标准。在Unix/Linux中，这可以是一组文件名模式、正则表达式或其他条件，用于识别哪些数据需要进一步处理。</li>
<li><strong>动作（Action）</strong>：这是当数据符合模式时需要执行的任务。它由一系列命令组成，描述了如何处理匹配的数据。</li>
</ol>
<p>注意：如果 pattern 为 <code>any</code> 或者 <code>null</code>，表示不进行筛选，直接执行动作。</p>
<p>例如，在Shire中，我们可以这样定义一个 Pattern-Action：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/.*.java/ { find(&quot;error.log&quot;) | print }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>这里，<code>/*.java/</code> 是模式部分，用于匹配所有以 <code>.java</code> 结尾的文件，而 <code>{ find(&quot;error.log&quot;) | print }</code> 是动作部分，
表示对匹配的文件执行一系列操作：首先搜索包含 &quot;error.log&quot; 的行，然后对这些行进行排序，最后将结果输出到标准输出。</p>
<p>在 Shire 中，我们利用了 Intellij 的强大功能，如正则表达式匹配、代码高亮和语法检查，以帮助用户更高效地编写代码。例如，
使用正则表达式 <code>.*.java</code> 可以轻松地匹配所有 Java 源文件。</p>
<p>明白了！让我为您完整优化一下文档，包括对示例的详细解释：</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="示例-1pattern-action-pipeline">示例 1：Pattern-Action Pipeline<a href="#示例-1pattern-action-pipeline" class="hash-link" aria-label="Direct link to 示例 1：Pattern-Action Pipeline" title="Direct link to 示例 1：Pattern-Action Pipeline">​</a></h3>
<div class="language-shire codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shire codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variables:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;var2&quot;: /.*.java/ { cat | find(&quot;error.log&quot;) | sort | cat }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;extContext&quot;: /build\.gradle\.kts/ { cat | find(&quot;org.springframework.boot:spring-boot-starter-jdbc&quot;) | print(&quot;This project use Spring Framework&quot;) }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>在这个示例中：</p>
<ul>
<li>
<p><strong><code>var2</code> 变量</strong>：匹配所有以 <code>.java</code> 结尾的文件。动作部分使用了管道操作符 <code>|</code>，依次执行了 <code>find(&quot;error.log&quot;)</code>、<code>sort</code>
，然后再次使用 <code>cat</code> 输出结果。</p>
</li>
<li>
<p><strong><code>extContext</code> 变量</strong>：匹配所有名为 <code>build.gradle.kts</code>
的文件。动作部分执行了 <code>find(&quot;org.springframework.boot:spring-boot-starter-jdbc&quot;)</code>，并输出一条指示该项目使用 Spring
Framework 的信息。</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="示例-2pattern-action-多-case">示例 2：Pattern-Action 多 CASE<a href="#示例-2pattern-action-多-case" class="hash-link" aria-label="Direct link to 示例 2：Pattern-Action 多 CASE" title="Direct link to 示例 2：Pattern-Action 多 CASE">​</a></h3>
<div class="language-shire codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shire codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variables:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;testTemplate&quot;: /\(.*\).java/ {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    case &quot;$1&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;Controller&quot; { cat(&quot;.shire/templates/ControllerTest.java&quot;) }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;Service&quot; { cat(&quot;.shire/templates/ServiceTest.java&quot;) }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      default  { cat(&quot;.shire/templates/DefaultTest.java&quot;) }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>在这个示例中：</p>
<ul>
<li><strong><code>testTemplate</code> 变量</strong>：匹配所有以 <code>(.*)</code> 开头、<code>.java</code> 结尾的文件。根据不同的匹配结果执行不同的动作。<!-- -->
<ul>
<li>如果匹配到 <code>Controller</code>，则输出 <code>ControllerTest.java</code> 的内容。</li>
<li>如果匹配到 <code>Service</code>，则输出 <code>ServiceTest.java</code> 的内容。</li>
<li>如果没有匹配到上述任何值（<code>default</code>），则输出 <code>DefaultTest.java</code> 的内容。</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="示例-3变量二次处理">示例 3：变量二次处理<a href="#示例-3变量二次处理" class="hash-link" aria-label="Direct link to 示例 3：变量二次处理" title="Direct link to 示例 3：变量二次处理">​</a></h3>
<p>用户自定义变量可以对 Shire 自带变量进行二次处理，例如：</p>
<div class="language-shire codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shire codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name: &quot;添加测试&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">actionLocation: ContextMenu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variables:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;sourceCode&quot;: /any/ { print($filePath) | sed(&quot;src\/test\/&quot;, &quot;src/main/&quot;) | sed(&quot;Test.java&quot;, &quot;.java&quot;) | cat }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">onStreamingEnd: { parseCode | patch($filePath, $output) }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pattern-function">Pattern Function<a href="#pattern-function" class="hash-link" aria-label="Direct link to Pattern Function" title="Direct link to Pattern Function">​</a></h2>
<table><thead><tr><th>函数类别</th><th>功能描述</th><th>参数</th><th>示例</th></tr></thead><tbody><tr><td>find</td><td>基于文本搜索</td><td><code>text</code>: 要搜索的文本</td><td><code>find(&quot;error&quot;)</code></td></tr><tr><td>grep</td><td>使用模式进行搜索</td><td><code>patterns</code>: 要搜索的模式</td><td><code>grep(&quot;[a-zA-Z]+Controller&quot;)</code></td></tr><tr><td>sed</td><td>查找和替换操作</td><td><code>pattern</code>: 要查找的模式<br><code>replacements</code>: 替换的字符串<br><code>isRegex</code>: 是否为正则表达式</td><td><code>sed(&quot;s/old/new/g&quot;)</code></td></tr><tr><td>sort</td><td>排序操作</td><td><code>arguments</code>: 排序所需的参数</td><td><code>sort</code></td></tr><tr><td>uniq</td><td>去除重复行</td><td><code>texts</code>: 要处理的文本</td><td><code>uniq(&quot;line1&quot;, &quot;line2&quot;, &quot;line1&quot;)</code></td></tr><tr><td>head</td><td>获取文件的前几行</td><td><code>number</code>: 要获取的行数</td><td><code>head(10)</code></td></tr><tr><td>tail</td><td>获取文件的末尾几行</td><td><code>number</code>: 要获取的行数</td><td><code>tail(5)</code></td></tr><tr><td>xargs</td><td>处理变量</td><td><code>variables</code>: 要处理的变量</td><td><code>xargs(&quot;arg1&quot;, &quot;arg2&quot;)</code></td></tr><tr><td>print</td><td>打印文本</td><td><code>texts</code>: 要打印的文本</td><td><code>print(&quot;Hello&quot;, &quot;World&quot;)</code></td></tr><tr><td>cat</td><td>连接文件</td><td><code>paths</code>: 要连接的文件路径</td><td><code>cat(&quot;file1.txt&quot;, &quot;file2.txt&quot;)</code></td></tr><tr><td>notify</td><td>使用 IDE 通知</td><td><code>message</code>: 要显示的通知消息</td><td><code>notify(&quot;Process completed successfully.&quot;)</code></td></tr><tr><td>redact</td><td>屏蔽敏感数据</td><td></td><td><code>redact()</code></td></tr><tr><td>jsonpath</td><td>使用 JsonPath 选择数据</td><td><code>jsonPath</code>: JsonPath 表达式,其中 jsonString 为可选</td><td><code>jsonpath(jsonString, &quot;$.store.*&quot;)</code></td></tr><tr><td>batch</td><td>批处理操作</td><td><code>fileName</code>: Shire  文件名，: paths`: 要处理的文件路径</td><td><code>batch(&quot;file1.shire&quot;, &quot;file2.txt&quot;)</code></td></tr><tr><td>tokenizer</td><td>分词操作</td><td><code>text</code>: 待分词的文本, type: 分词类型（<code>word</code>, <code>naming</code>, <code>stopwords</code>，<code>jieba</code>，默认 <code>word</code>）</td><td><code>tokenizer(&quot;text&quot;) </code></td></tr><tr><td>lineNo</td><td>行号操作</td><td><code>text</code>: 待处理的文本</td><td><code>lineNo(&quot;text&quot;)</code></td></tr></tbody></table>
<p>编排函数</p>
<table><thead><tr><th>函数类别</th><th>功能描述</th><th>参数</th><th>示例</th></tr></thead><tbody><tr><td>execute</td><td>异步执行 Shire 脚本、GradleTask 等</td><td><code>string</code>: 要执行的脚本内容</td><td><code>execute(&quot;next-script.shire&quot;)</code></td></tr><tr><td>thread</td><td>线程执行（异步）</td><td><code>path</code>: 要执行的脚本路径</td><td><code>thread(&quot;script.shire&quot;)</code></td></tr><tr><td>approveExecute</td><td>等待确认再执行</td><td><code>path</code>: 要执行的脚本路径</td><td><code>approveExecute(&quot;script.shire&quot;)</code></td></tr></tbody></table>
<p>Execute</p>
<ul>
<li>Shire 脚本执行: <code>execute(&quot;next-script.shire&quot;)</code></li>
<li>GradleTask 执行: <code>execute(&quot;:bootRun&quot;)</code></li>
<li>文件执行: <code>execute(&quot;next-script.sh&quot;)</code></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/unit-mesh/auto-dev/tree/master/docs/docs/local-agent/custom-variable.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/en/local-agent/builtin-variable"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Builtin Variable</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/en/local-agent/env"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Environment</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#shire-常规自定义变量" class="table-of-contents__link toc-highlight">Shire 常规自定义变量</a></li><li><a href="#variable-pattern-action" class="table-of-contents__link toc-highlight">Variable Pattern Action</a><ul><li><a href="#示例-1pattern-action-pipeline" class="table-of-contents__link toc-highlight">示例 1：Pattern-Action Pipeline</a></li><li><a href="#示例-2pattern-action-多-case" class="table-of-contents__link toc-highlight">示例 2：Pattern-Action 多 CASE</a></li><li><a href="#示例-3变量二次处理" class="table-of-contents__link toc-highlight">示例 3：变量二次处理</a></li></ul></li><li><a href="#pattern-function" class="table-of-contents__link toc-highlight">Pattern Function</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/en/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Blog</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/en/blog">Blog</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/unit-mesh/auto-dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Unit Mesh. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>