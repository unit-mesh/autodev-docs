"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[1031],{3001:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"workflow/auto-sql","title":"AutoSQL","description":"Required Intellij Plugin: Database Tools and SQL","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/workflow/auto-sql.md","sourceDirName":"workflow","slug":"/workflow/auto-sql","permalink":"/en/workflow/auto-sql","draft":false,"unlisted":false,"editUrl":"https://github.com/unit-mesh/auto-dev/tree/master/docs/docs/workflow/auto-sql.md","tags":[],"version":"current","frontMatter":{"layout":"default","title":"AutoSQL","nav_order":2,"parent":"Workflow"}}');var s=t(4848),a=t(8453);const o={layout:"default",title:"AutoSQL",nav_order:2,parent:"Workflow"},i=void 0,l={},c=[{value:"Prompt Override",id:"prompt-override",level:2},{value:"Current Prompt",id:"current-prompt",level:3}];function u(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Required Intellij Plugin: Database Tools and SQL"}),"\n",(0,s.jsxs)(n.p,{children:["Demo Video: ",(0,s.jsx)(n.a,{href:"https://www.bilibili.com/video/BV1Ye411h7Qu/",children:"https://www.bilibili.com/video/BV1Ye411h7Qu/"})]}),"\n",(0,s.jsx)(n.p,{children:"implementation: cc.unitmesh.database.flow.AutoSqlFlow"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"user should connect to DataSource/Database"}),"\n",(0,s.jsx)(n.li,{children:"based on user input, AI select the target tables."}),"\n",(0,s.jsxs)(n.li,{children:["generate the SQL scripts for the target tables.","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"generate columns of selected tables."}),"\n",(0,s.jsx)(n.li,{children:"generate SQL scripts for selected tables."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"prompt-override",children:"Prompt Override"}),"\n",(0,s.jsx)(n.p,{children:"Steps:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["step 1: ",(0,s.jsx)(n.code,{children:"prompts/genius/sql/sql-gen-clarify.vm"})]}),"\n",(0,s.jsxs)(n.li,{children:["step 2: ",(0,s.jsx)(n.code,{children:"prompts/genius/sql/sql-gen-design.vm"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Context:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-kotlin",children:"data class AutoSqlContext(\n   val requirement: String,\n   val databaseVersion: String,\n   val schemaName: String,\n   val tableNames: List<String>,\n   /**\n    * Step 2.\n    * A list of table names to retrieve the columns from.\n    */\n   var tableInfos: List<String> = emptyList(),\n)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"current-prompt",children:"Current Prompt"}),"\n",(0,s.jsx)(n.p,{children:"Clarify:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-markdown",children:"    You are a professional Database Administrator.\n    According to the user's requirements, you should choose the best Tables for the user in List.\n    \n    \u2014 User use database: ${context.databaseVersion}\n    - User schema name: ${context.schemaName}\n    - User tables: ${context.tableNames}\n    \n    For example:\n    \n    - Question(requirements): calculate the average trip length by subscriber type.// User tables: trips, users, subscriber_type\n    - You should anwser: [trips, subscriber_type]\n    \n    ----\n    \n    Here are the User requirements:\n    \n    ${context.requirement}\n    \n    Please choose the best Tables for the user, just return the table names in a list, no explain.\n"})}),"\n",(0,s.jsx)(n.p,{children:"Design:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-markdown",children:"    You are a professional Database Administrator.\n    According to the user's requirements, and Tables info, write SQL for the user.\n    \n    \u2014 User use database: ${context.databaseVersion}\n    - User schema name: ${context.schemaName}\n    - User tableInfos: ${context.tableInfos}\n    \n    For example:\n    \n    - Question(requirements): calculate the average trip length by subscriber type.\n    // table `subscriber_type`: average_trip_length: int, subscriber_type: string\n    - Answer:\n\n    select average_trip_length from subscriber_type where subscriber_type = 'subscriber'\n    \n    ----\n    \n    Here are the requirements:\n\n    ${context.requirement}\n    \n    Please write your SQL with Markdown syntax, no explanation is needed. :\n"})})]})}function d(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>i});var r=t(6540);const s={},a=r.createContext(s);function o(e){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);