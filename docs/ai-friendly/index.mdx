---
title: AI 友好架构
hide_table_of_contents: true
hide_title: true
---

import { useState, useRef } from 'react';
import BrowserOnly from '@docusaurus/BrowserOnly';
import ArchitectureFlow from '../../src/components/ArchitectureFlow';
import CodeBlock from '@theme/CodeBlock';
import ImplementationGuide from '../../src/components/ImplementationGuide';
import {
	Shield,
	GitCommit,
	RefreshCw,
	CheckCircle,
	AlertTriangle,
	FileText,
	MessageSquare,
	BrainCircuit,
	ArrowLeftRight,
	Search,
	Database,
	HelpCircle,
	PanelsLeftBottom,
	Check,
	GitBranch,
	RotateCcw
} from "lucide-react"

export const AIFriendlyArchitecture = () => {
	const [activeSection, setActiveSection] = useState(null);

	const domainLanguageRef = useRef(null);
	const plannerRef = useRef(null);
	const semanticCodeRef = useRef(null);
	const refactorToolRef = useRef(null);
	const retrievalToolRef = useRef(null);
	const refinedQuestionRef = useRef(null);
	const specPracticeRef = useRef(null);
	const actionRef = useRef(null);
	const validationRef = useRef(null);

	const scrollToSection = (section) => {
		setActiveSection(section);
		setTimeout(() => {
			const refs = {
				'domain-language': domainLanguageRef,
				'planner': plannerRef,
				'semantic-code': semanticCodeRef,
				'refactor-tool': refactorToolRef,
				'retrieval-tool': retrievalToolRef,
				'refined-question': refinedQuestionRef,
				'spec-practice': specPracticeRef,
				'action': actionRef,
				'validation': validationRef
			};

			const ref = refs[section];
			if (ref && ref.current) {
				ref.current.scrollIntoView({ behavior: 'smooth' });
			}
		}, 100);
	};

	return (
		<div className="aife">
			<div className="text-center mb-12">
				<h1 className="gradient-text font-bold mb-4">AI 友好架构</h1>
				<p className="text-center text-lg text-slate-600 mt-2">创建既便于人类协作，又能被AI高效理解、分析、生成和持续演进的代码资产与系统环境</p>
			</div>

			<div className="mb-4">
				<ArchitectureFlow onClickSection={scrollToSection}/>
				<p className="text-center text-lg text-slate-600 mt-2">点击架构图中的任意元素，了解详细信息</p>
			</div>

			{/* 领域语言（研发知识工程） */}
			<div ref={domainLanguageRef} className="mt-12">
				<div className="section-header">
					<h2 className="section-title bg-purple-700">领域知识丰富上下文与问题定义</h2>
					<p className="text-slate-600">通过领域驱动设计原则，将业务领域知识结构化，为AI提供更丰富、精确的上下文信息</p>
				</div>

				<div className="grid-2">
					<div className="card">
						<div className="icon-circle bg-purple-700">
							<FileText className="h-6 w-6" />
						</div>
						<h3 className="text-xl font-semibold mb-2">代码命名规范的产生</h3>
						<p className="text-slate-600 mb-4">构建统一的语言，确保团队成员和 AI 都能理解代码含义</p>

						<div className="bg-slate-100 p-4 rounded-lg">
							<h4 className="font-medium mb-2">命名示例：金融产品"稳享灵动慧利"</h4>
							<ul className="space-y-2 text-sm">
								<li className="flex items-start">
									<span className="text-red-500 mr-2">✗</span>
									<span>SteadilyEnjoyAgileWisdomAndBenefits - 直接翻译</span>
								</li>
								<li className="flex items-start">
									<span className="text-red-500 mr-2">✗</span>
									<span>AgileBenefitController - 挑选重点</span>
								</li>
								<li className="flex items-start">
									<span className="text-green-600 mr-2">✓</span>
									<span>WenXiangLingDongHuiLi - 拼音全称</span>
								</li>
								<li className="flex items-start">
									<span className="text-green-600 mr-2">✓</span>
									<span>WXLDHL - 拼音首字母</span>
								</li>
							</ul>
							<p className="text-sm text-slate-600 mt-2">团队达成一致的命名规范是关键</p>
						</div>
					</div>

					<div className="card">
						<div className="icon-circle bg-purple-700">
							<MessageSquare className="h-6 w-6" />
						</div>
						<h3 className="text-xl font-semibold mb-2">领域特定语言</h3>
						<p className="text-slate-600 mb-4">围绕业务领域概念构建代码，创建开发人员和利益相关者之间的共享语言
							（详细见：<a target={"_blank"} href="https://ide.unitmesh.cc/composer/workspace">AutoDev Workspace 术语表</a>）
						</p>

						<div className="bg-slate-100 p-4 rounded-lg">
							<h4 className="font-medium mb-2">领域语言的好处</h4>
							<ul className="space-y-2">
								<li className="flex items-start">
									<span className="text-green-600 mr-2">•</span>
									<span>减少翻译成本：业务人员和开发人员使用相同的术语</span>
								</li>
								<li className="flex items-start">
									<span className="text-green-600 mr-2">•</span>
									<span>提高代码可读性：代码直接反映业务概念</span>
								</li>
								<li className="flex items-start">
									<span className="text-green-600 mr-2">•</span>
									<span>增强 AI 理解：AI 能更好地理解领域特定的术语和概念</span>
								</li>
								<li className="flex items-start">
									<span className="text-green-600 mr-2">•</span>
									<span>降低维护成本：新团队成员更容易理解代码</span>
								</li>
							</ul>
						</div>
					</div>
				</div>

				<div className="mt-12 bg-purple-50 rounded-lg p-8">
					<h3 className="text-2xl font-bold mb-4 text-center">领域语言实施步骤</h3>
					<p className="text-slate-600 text-center p-2">借助生成 AI 生成领域特定语言：
						<a target={"_blank"} href="https://ide.unitmesh.cc/composer/workspace">AutoDev Workspace</a> 采用 domain.csv 作为
						人类与 AI 之间的桥梁，帮助 AI 理解领域特定的术语和概念
					</p>

					<div className="grid-3">
						<div className="bg-white p-5 rounded-lg shadow">
							<h4 className="font-semibold mb-3 text-purple-700">1. 识别核心概念</h4>
							<p className="text-slate-600">与业务专家合作，识别和定义领域中的核心概念和术语</p>
						</div>

						<div className="bg-white p-5 rounded-lg shadow">
							<h4 className="font-semibold mb-3 text-purple-700">2. 创建术语表</h4>
							<p className="text-slate-600">记录所有领域术语及其定义，确保团队成员一致理解</p>
						</div>

						<div className="bg-white p-5 rounded-lg shadow">
							<h4 className="font-semibold mb-3 text-purple-700">3. 在代码中应用</h4>
							<p className="text-slate-600">使用领域术语表命名类、方法和变量，确保代码反映业务语言</p>
						</div>
					</div>
				</div>
			</div>

			{/* 智能任务规划 */}
			<div ref={plannerRef} className="mt-12">
				<div className="section-header">
					<h2 className="section-title bg-orange-500">知识导向任务规划</h2>
					<p className="text-slate-600">使用Project Rule和Agent Memories等机制，预先定义项目上下文信息，让AI遵循项目规范</p>
				</div>

				<div className="card">
					<div className="grid-2">
						<div>
							<div className="icon-circle bg-orange-500">
								<BrainCircuit className="h-6 w-6" />
							</div>
							<h3 className="text-xl font-semibold mb-2">任务分解</h3>
							<p className="text-slate-600 mb-4">将复杂需求分解为可管理的子任务，创建清晰的执行路径</p>

							<div className="bg-slate-100 p-4 rounded-lg">
								<h4 className="font-medium mb-2">任务分解示例</h4>
								<ul className="space-y-2">
									<li className="flex items-start">
										<span className="text-orange-500 mr-2">1.</span>
										<span>主需求：实现用户管理功能</span>
									</li>
									<li className="flex items-start" style={{ paddingLeft: '1.5rem' }}>
										<span className="text-orange-500 mr-2">→</span>
										<span>子任务 1：设计用户数据模型</span>
									</li>
									<li className="flex items-start" style={{ paddingLeft: '1.5rem' }}>
										<span className="text-orange-500 mr-2">→</span>
										<span>子任务 2：实现用户注册功能</span>
									</li>
									<li className="flex items-start" style={{ paddingLeft: '1.5rem' }}>
										<span className="text-orange-500 mr-2">→</span>
										<span>子任务 3：实现用户认证功能</span>
									</li>
									<li className="flex items-start" style={{ paddingLeft: '1.5rem' }}>
										<span className="text-orange-500 mr-2">→</span>
										<span>子任务 4：实现用户信息管理</span>
									</li>
								</ul>
							</div>
						</div>

						<div>
							<div className="icon-circle bg-orange-500">
								<BrainCircuit className="h-6 w-6" />
							</div>
							<h3 className="text-xl font-semibold mb-2">智能决策</h3>
							<p className="text-slate-600 mb-4">规划器基于领域知识和代码库上下文，为每个任务选择最佳实现策略</p>

							<div className="bg-slate-100 p-4 rounded-lg">
								<h4 className="font-medium mb-2">决策过程</h4>
								<ul className="space-y-2">
									<li className="flex items-start">
										<span className="text-orange-500 mr-2">•</span>
										<span>分析现有代码模式和架构</span>
									</li>
									<li className="flex items-start">
										<span className="text-orange-500 mr-2">•</span>
										<span>识别适用的设计模式和最佳实践</span>
									</li>
									<li className="flex items-start">
										<span className="text-orange-500 mr-2">•</span>
										<span>考虑性能、可维护性和可扩展性</span>
									</li>
									<li className="flex items-start">
										<span className="text-orange-500 mr-2">•</span>
										<span>生成符合团队规范的实现计划</span>
									</li>
								</ul>
							</div>
						</div>
					</div>

					<div className="mt-12 p-6 bg-orange-50 rounded-lg">
						<h4 className="font-semibold mb-4 text-center">规划与执行的协同工作</h4>
						<p className="text-slate-700">
							AutoDev Planner 利用 AI 的能力来理解需求、分析代码库并生成实施计划，模型按需更新计划。它结合了领域语言的知识，
							确保生成的计划符合团队的规范和最佳实践。通过这种方式，AutoDev Planner 成为开发人员和 Sketch 编码智能体的桥梁，
							大大提高了开发效率和代码质量。

							（详细见：<a target={"_blank"} href="https://ide.unitmesh.cc/composer/planner">AutoDev Planner</a>）
						</p>
					</div>
				</div>
			</div>

			{/* 自文档化代码 */}
			<div ref={semanticCodeRef} className="mt-12">
				<div className="section-header">
					<h2 className="section-title bg-purple-400">自文档化代码增强语义化表达</h2>
					<p className="text-slate-600">通过语义化命名、结构化设计与契约式编程，使代码本身成为最准确的"文档"</p>
				</div>

				<div className="grid-2">
					<div className="card">
						<div className="flex items-center mb-4">
							<div className="bg-red-500 icon-circle mr-3">
								<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
								     stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
									<polyline points="16 18 22 12 16 6"></polyline>
									<polyline points="8 6 2 12 8 18"></polyline>
								</svg>
							</div>
							<h3 className="text-xl font-semibold">传统代码风格</h3>
						</div>

						<div className="code-block">
							<CodeBlock language="java" title="传统代码风格示例">
								{`@RestController
@RequestMapping("/api")
public class Ctrl {
    @Autowired
    private Svc svc;

    @GetMapping("/u/{id}")
    public Resp getU(@PathVariable Long id) {
        return svc.getById(id);
    }

    @PostMapping("/u")
    public Resp addU(@RequestBody Req req) {
        return svc.add(req);
    }
}`}
							</CodeBlock>
						</div>

						<div className="text-red-500">
							<p className="text-sm">✗ 缩写命名难以理解</p>
							<p className="text-sm">✗ 缺乏语义化注释</p>
							<p className="text-sm">✗ 方法名称不明确</p>
							<p className="text-sm">✗ 对 AI 不友好</p>
						</div>
					</div>

					<div className="card">
						<div className="flex items-center mb-2">
							<div className="bg-green-600 icon-circle  mr-3">
								<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
								     stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
									<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
									<polyline points="14 2 14 8 20 8"></polyline>
									<line x1="16" y1="13" x2="8" y2="13"></line>
									<line x1="16" y1="17" x2="8" y2="17"></line>
									<polyline points="10 9 9 9 8 9"></polyline>
								</svg>
							</div>
							<h3 className="text-xl font-semibold">AI 友好代码风格</h3>
						</div>
						<div className="code-block">
							<CodeBlock language="java" title="AI 友好代码风格示例">
								{`@RestController
@RequestMapping("/api/users")
public class UserController {
    private final UserService userService;

    public UserController(UserService userService) {
        this.userService = userService;
    }

    /**
     * 获取用户信息
     * @param id 用户ID
     * @return 用户信息
     */
    @GetMapping("/{id}")
    public UserResponse getUserById(@PathVariable Long id) {
        return userService.getUserById(id);
    }
}`}
							</CodeBlock>
						</div>

						<div className="text-green-600">
							<p className="text-sm">✓ 完整的类名和方法名</p>
							<p className="text-sm">✓ 清晰的注释说明功能</p>
							<p className="text-sm">✓ 语义化的 API 路径</p>
							<p className="text-sm">✓ 构造函数注入依赖</p>
						</div>
					</div>
				</div>

				<div className="mt-12 bg-purple-50 rounded-lg p-8">
					<h3 className="text-2xl font-bold mb-6 text-center">语义化代码的核心原则</h3>

					<div className="grid-3">
						<div className="bg-white p-5 rounded-lg shadow">
							<h4 className="font-semibold mb-3 text-purple-700">描述性命名</h4>
							<p className="text-slate-600">使用清晰、具体的名称，避免缩写和模糊的术语，确保名称反映实体的目的和功能</p>
						</div>

						<div className="bg-white p-5 rounded-lg shadow">
							<h4 className="font-semibold mb-3 text-purple-700">自文档化</h4>
							<p className="text-slate-600">
								编写不需要额外注释就能清晰表达意图的代码，通过良好的结构和命名使代码自解释
							</p>
						</div>

						<div className="bg-white p-5 rounded-lg shadow">
							<h4 className="font-semibold mb-3 text-purple-700">一致性模式</h4>
							<p className="text-slate-600">
								在整个代码库中保持一致的命名和结构模式，使开发人员和 AI 能够预测和理解代码
							</p>
						</div>
					</div>
				</div>

				<div className="mt-8 bg-blue-50 rounded-lg p-8">
					<h3 className="text-2xl font-bold mb-6 text-center">适应于 AI 理解的编程范式</h3>

					<div className="grid-3">
						<div className="bg-white p-5 rounded-lg shadow">
							<h4 className="font-semibold mb-3 text-blue-700">利用类型系统</h4>
							<p className="text-slate-600">
								在静态强类型语言（Java, C#, TypeScript）中，明确的类型注解提供了关于数据结构、函数签名和预期数据流的强形式化信息，AI 可利用这些信息生成类型安全且符合接口的代码
							</p>
						</div>

						<div className="bg-white p-5 rounded-lg shadow">
							<h4 className="font-semibold mb-3 text-blue-700">契约式设计 (DbC)</h4>
							<p className="text-slate-600">
								通过嵌入形式化的前置条件 (requires)、后置条件 (ensures) 和不变量 (invariant)，精确描述组件的责任和期望行为
							</p>
						</div>

						<div className="bg-white p-5 rounded-lg shadow">
							<h4 className="font-semibold mb-3 text-blue-700">函数式编程原则</h4>
							<p className="text-slate-600">
								采用纯函数（无副作用，输入相同则输出相同），不可变性（避免状态修改），以及高阶函数与组合（模块化和声明式风格），使代码更易于 AI 理解结构和意图
							</p>
						</div>
					</div>
				</div>
			</div>

			{/* 面向生成的重构 */}
			<div ref={refactorToolRef} className="mt-12">
				<div className="section-header">
					<h2 className="section-title bg-green-600">面向 AI 理解的重构</h2>
					<p className="text-slate-600">应用提炼函数、提炼类等经典重构技术，降低代码复杂度，使AI更易理解代码结构与业务逻辑</p>
				</div>

				<div className="card">
					<div className="grid-2">
						<div>
							<div className="icon-circle bg-green-600">
								<ArrowLeftRight className="h-6 w-6" />
							</div>
							<h3 className="text-xl font-semibold mb-2">代码优化</h3>
							<p className="text-slate-600 mb-4">重构工具能够识别并改进代码中的问题，使其更加清晰、简洁和高效</p>

							<div className="bg-slate-100 p-4 rounded-lg">
								<h4 className="font-medium mb-2">重构类型</h4>
								<ul className="space-y-2">
									<li className="flex items-start">
										<span className="text-green-600 mr-2">•</span>
										<span>提取方法：将复杂逻辑分解为更小的方法</span>
									</li>
									<li className="flex items-start">
										<span className="text-green-600 mr-2">•</span>
										<span>重命名：使用更具描述性的名称</span>
									</li>
									<li className="flex items-start">
										<span className="text-green-600 mr-2">•</span>
										<span>移动代码：将代码移至更合适的位置</span>
									</li>
									<li className="flex items-start">
										<span className="text-green-600 mr-2">•</span>
										<span>简化条件：使复杂条件更易理解</span>
									</li>
								</ul>
							</div>
						</div>

						<div>
							<div className="icon-circle bg-green-600">
								<ArrowLeftRight className="h-6 w-6" />
							</div>
							<h3 className="text-xl font-semibold mb-2">AI 友好转换</h3>
							<p className="text-slate-600 mb-4">将现有代码转换为更适合 AI 理解和生成的形式，提高 AI 辅助编程的效率</p>

							<div className="bg-slate-100 p-4 rounded-lg">
								<h4 className="font-medium mb-2">AI 友好转换示例</h4>
								<ul className="space-y-2">
									<li className="flex items-start">
										<span className="text-green-600 mr-2">•</span>
										<span>拆分过长的方法，使其更易于理解</span>
									</li>
									<li className="flex items-start">
										<span className="text-green-600 mr-2">•</span>
										<span>添加语义化注释，解释复杂逻辑</span>
									</li>
									<li className="flex items-start">
										<span className="text-green-600 mr-2">•</span>
										<span>规范化命名，使其符合团队约定</span>
									</li>
									<li className="flex items-start">
										<span className="text-green-600 mr-2">•</span>
										<span>简化复杂的嵌套结构</span>
									</li>
								</ul>
							</div>
						</div>
					</div>

					<div className="mt-4 bg-green-50 rounded-lg">
						<h4 className="font-semibold mb-4 text-center">重构前后对比</h4>

						<div className="grid-2">
							<div>
								<h5 className="font-medium mb-2 text-red-500">重构前</h5>
								<div className="code-block">
									<CodeBlock language="java" title="重构前代码示例">
										{`public void prc(List<T> l, int f) {
  for (int i = 0; i < l.size(); i++) {
    if (l.get(i).getF() > f) {
      l.get(i).setS(true);
      db.sv(l.get(i));
    } else {
      l.get(i).setS(false);
      l.get(i).setR(0);
      db.sv(l.get(i));
    }
  }
}`}
									</CodeBlock>
								</div>
							</div>

							<div>
								<h5 className="font-medium mb-2 text-green-600">重构后</h5>
								<div className="code-block">
									<CodeBlock language="java" title="重构后代码示例">
										{`/**
 * 处理项目列表，根据阈值设置状态
 * @param items 要处理的项目列表
 * @param threshold 状态判断阈值
 */
public void processItems(List<Item> items, int threshold) {
  for (Item item : items) {
    if (item.getFlag() > threshold) {
      markItemAsSelected(item);
    } else {
      markItemAsNotSelected(item);
    }
  }
}

private void markItemAsSelected(Item item) {
  item.setSelected(true);
  database.saveItem(item);
}

private void markItemAsNotSelected(Item item) {
  item.setSelected(false);
  item.setRank(0);
  database.saveItem(item);
}`}
									</CodeBlock>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			{/* 语义化代码检索 */}
			<div ref={retrievalToolRef} className="mt-12">
				<div className="section-header">
					<h2 className="section-title bg-pink-500">语义化代码检索</h2>
					<p className="text-slate-600">智能检索代码库中的相关信息，提高开发效率</p>
				</div>

				<div className="card">
					<div className="grid-2">
						<div>
							<div className="icon-circle bg-pink-500">
								<Search className="h-6 w-6" />
							</div>
							<h3 className="text-xl font-semibold mb-2">语义化搜索</h3>
							<p className="text-slate-600 mb-4">基于意图和语义理解进行代码搜索，而不仅仅是关键字匹配</p>

							<div className="bg-slate-100 p-4 rounded-lg">
								<h4 className="font-medium mb-2">语义化搜索优势</h4>
								<ul className="space-y-2">
									<li className="flex items-start">
										<span className="text-pink-500 mr-2">•</span>
										<span>理解查询意图，返回相关代码</span>
									</li>
									<li className="flex items-start">
										<span className="text-pink-500 mr-2">•</span>
										<span>识别功能相似但命名不同的代码</span>
									</li>
									<li className="flex items-start">
										<span className="text-pink-500 mr-2">•</span>
										<span>支持自然语言查询，如"查找用户认证相关代码"</span>
									</li>
									<li className="flex items-start">
										<span className="text-pink-500 mr-2">•</span>
										<span>考虑代码上下文和关系</span>
									</li>
								</ul>
							</div>
						</div>

						<div>
							<div className="icon-circle bg-pink-500">
								<Database className="h-6 w-6" />
							</div>
							<h3 className="text-xl font-semibold mb-2">代码知识库</h3>
							<p className="text-slate-600 mb-4">构建和维护代码库的知识图谱，支持智能推荐和上下文理解</p>

							<div className="bg-slate-100 p-4 rounded-lg">
								<h4 className="font-medium mb-2">知识库功能</h4>
								<ul className="space-y-2">
									<li className="flex items-start">
										<span className="text-pink-500 mr-2">•</span>
										<span>索引代码结构、关系和依赖</span>
									</li>
									<li className="flex items-start">
										<span className="text-pink-500 mr-2">•</span>
										<span>记录代码使用模式和最佳实践</span>
									</li>
									<li className="flex items-start">
										<span className="text-pink-500 mr-2">•</span>
										<span>提供相关代码示例和参考</span>
									</li>
									<li className="flex items-start">
										<span className="text-pink-500 mr-2">•</span>
										<span>支持代码复用和模式识别</span>
									</li>
								</ul>
							</div>
						</div>
					</div>

					<div className="mt-12 p-6 bg-pink-50 rounded-lg">
						<h4 className="font-semibold mb-4 text-center">检索工具与 AI 的协同</h4>
						<p className="text-slate-700">
							检索工具为 AI 提供必要的上下文信息，使 AI 能够生成更加准确、符合项目规范的代码。
							通过智能检索相关代码示例和模式，AI 可以学习并应用团队的最佳实践，
							大大提高代码生成的质量和一致性。同时，检索工具也帮助开发人员快速找到所需的代码资源，
							减少重复工作，提高开发效率。
						</p>

						<div className="mt-6 p-4 bg-white rounded-lg border border-pink-100">
							<h5 className="font-medium mb-2 text-center">检索示例</h5>
							<div className="flex items-center p-2 bg-slate-100 rounded">
								<span className="text-slate-500 mr-2">查询:</span>
								<span className="font-medium">"如何在我们的项目中实现用户认证"</span>
							</div>
							<div className="mt-2 p-3 bg-pink-100 rounded">
								<p className="text-sm font-medium mb-1">检索结果:</p>
								<ul className="text-sm space-y-1">
									<li>AuthenticationService.java - 用户认证服务</li>
									<li>SecurityConfig.java - 安全配置</li>
									<li>UserController.java - 登录接口</li>
									<li>AuthUtils.java - 认证工具类</li>
								</ul>
							</div>
						</div>
					</div>
				</div>
			</div>

			{/* 问题精炼/定义意图 */}
			<div ref={refinedQuestionRef} className="mt-12">
				<div className="section-header">
					<h2 className="section-title bg-slate-100 text-slate-800">问题精炼与意图定义</h2>
					<p className="text-slate-600">将模糊的需求结构化并丰富上下文，转化为明确、准确的问题提示词</p>
				</div>

				<div className="card">
					<div className="grid-2">
						<div>
							<div className="icon-circle bg-slate-700">
								<PanelsLeftBottom className="h-6 w-6" />
							</div>
							<h3 className="text-xl font-semibold mb-2">问题表达的挑战</h3>
							<p className="text-slate-600 mb-4">模糊的需求描述和简单的指令往往导致 AI 生成不符合预期的代码</p>

							<div className="bg-slate-100 p-4 rounded-lg">
								<h4 className="font-medium mb-2">常见问题</h4>
								<ul className="space-y-2">
									<li className="flex items-start">
										<span className="text-red-500 mr-2">✗</span>
										<span>"实现一个用户管理功能"（过于宽泛）</span>
									</li>
									<li className="flex items-start">
										<span className="text-red-500 mr-2">✗</span>
										<span>"添加登录功能"（缺乏上下文和细节）</span>
									</li>
									<li className="flex items-start">
										<span className="text-red-500 mr-2">✗</span>
										<span>"修复这个 bug"（没有提供足够信息）</span>
									</li>
									<li className="flex items-start">
										<span className="text-red-500 mr-2">✗</span>
										<span>"优化性能"（目标不明确）</span>
									</li>
								</ul>
							</div>
						</div>

						<div>
							<div className="icon-circle bg-slate-700">
								<HelpCircle className="h-6 w-6" />
							</div>
							<h3 className="text-xl font-semibold mb-2">问题精炼技巧</h3>
							<p className="text-slate-600 mb-4">通过结构化和丰富上下文，将模糊需求转化为明确的问题</p>

							<div className="bg-slate-100 p-4 rounded-lg">
								<h4 className="font-medium mb-2">精炼示例</h4>
								<ul className="space-y-2">
									<li className="flex items-start">
										<span className="text-green-600 mr-2">✓</span>
										<span>"实现用户注册功能，包含邮箱验证、密码强度检查，并与现有的用户认证系统集成"</span>
									</li>
									<li className="flex items-start">
										<span className="text-green-600 mr-2">✓</span>
										<span>"添加 JWT 基于的登录功能，使用现有的 UserService，并遵循 RESTful API 设计原则"</span>
									</li>
									<li className="flex items-start">
										<span className="text-green-600 mr-2">✓</span>
										<span>"优化数据库查询性能，当前查询耗时超过 2 秒，目标是降低到 500ms 以内"</span>
									</li>
								</ul>
							</div>
						</div>
					</div>

					<div className="mt-12 p-6 bg-blue-50 rounded-lg">
						<h4 className="font-semibold mb-4 text-center">结合 DDD 的问题上下文丰富</h4>
						<p className="text-slate-700 mb-4">
							使用统一的领域语言和明确的业务概念，使问题描述更加准确和有意义。
							在 <a target={"_blank"}  href="https://ide.unitmesh.cc/composer/workspace">AutoDev</a> 中，我们通过术语表
							来优化用户的需求（提示词），转换为包含领域模型的上下文丰富问题。
						</p>

						<div className="bg-white p-4 rounded-lg">
							<h5 className="font-medium mb-2">上下文丰富示例</h5>
							<div className="grid-2">
								<div>
									<p className="text-sm font-medium text-slate-700">原始问题:</p>
									<p className="p-2 bg-slate-100 rounded">"添加购物车功能"</p>
								</div>
								<div>
									<p className="text-sm font-medium text-slate-700">丰富后:</p>
									<p className="p-2 bg-blue-100 rounded">
										"实现购物车聚合根，包含添加商品项、更新数量、计算总价等功能。
										购物车需要与用户和商品目录领域对象交互，并实现购物车持久化。"
									</p>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			{/* 团队编码规范 */}
			<div ref={specPracticeRef} className="mt-12">
				<div className="section-header">
					<h2 className="section-title bg-purple-700">团队编码规范</h2>
					<p className="text-slate-600">团队实践优于最佳实践，建立一致的编码规范和工作流程</p>
				</div>

				<div className="card">
					<div className="grid-2">
						<div>
							<div className="icon-circle bg-purple-700">
								<Check className="h-6 w-6" />
							</div>
							<h3 className="text-xl font-semibold mb-2">代码检视实践</h3>
							<p className="text-slate-600 mb-4">通过代码检视维护团队最佳实践，确保代码质量和一致性</p>

							<div className="bg-slate-100 p-4 rounded-lg">
								<h4 className="font-medium mb-2">代码检视的目的</h4>
								<ul className="space-y-2">
									<li className="flex items-start">
										<span className="text-purple-700 mr-2">•</span>
										<span>规范一致性：命名规范、代码风格、注释规范等</span>
									</li>
									<li className="flex items-start">
										<span className="text-purple-700 mr-2">•</span>
										<span>保持最佳实践：通用逻辑模式采用、代码重用等</span>
									</li>
									<li className="flex items-start">
										<span className="text-purple-700 mr-2">•</span>
										<span>业务逻辑正确：代码修改是否符合业务逻辑</span>
									</li>
									<li className="flex items-start">
										<span className="text-purple-700 mr-2">•</span>
										<span>潜在的 bug：逻辑错误、性能问题等</span>
									</li>
								</ul>
							</div>
						</div>

						<div>
							<div className="icon-circle bg-purple-700">
								<GitBranch className="h-6 w-6" />
							</div>
							<h3 className="text-xl font-semibold mb-2">架构分层与内聚</h3>
							<p className="text-slate-600 mb-4">遏制面条式代码，通过分层和内聚构建清晰的系统结构</p>

							<div className="bg-slate-100 p-4 rounded-lg">
								<h4 className="font-medium mb-2">架构原则</h4>
								<ul className="space-y-2">
									<li className="flex items-start">
										<span className="text-purple-700 mr-2">•</span>
										<span>架构分层：划分系统的主要职责区域（表现层、业务逻辑层、数据访问层）</span>
									</li>
									<li className="flex items-start">
										<span className="text-purple-700 mr-2">•</span>
										<span>逻辑内聚：功能上紧密相关的代码单元应该聚合在一起</span>
									</li>
									<li className="flex items-start">
										<span className="text-purple-700 mr-2">•</span>
										<span>明确边界：定义清晰的模块边界和接口</span>
									</li>
									<li className="flex items-start">
										<span className="text-purple-700 mr-2">•</span>
										<span>概念一致：保持代码的一致性和可读性</span>
									</li>
								</ul>
							</div>
						</div>
					</div>

					<div className="mt-12 p-6 bg-purple-50 rounded-lg">
						<h2 className="font-semibold mb-4 text-center">Project Rule 实践</h2>
						<p className="text-slate-700 mb-4">
							在 AI IDE 中添加自定义的 <a href="https://ide.unitmesh.cc/composer/project-rule">Project Rule</a>，是一种非常有效的控制代码生成的方法。
							通过明确定义项目的规范和约束，可以指导 AI 生成符合团队实践的代码。
						</p>

						<div className="bg-white p-4 rounded-lg">
							<div className="code-block">
								<CodeBlock language="markdown" title="AutoDev Project Dir 示例">
									{`## Project Rule Dir
prompts/rules/
├── controller.md
├── service.md
├── repository.md
├── rpc.md
└── README.md  # 该文件会被默认始终加载！！
`}
								</CodeBlock>
								<CodeBlock language="markdown" title="AutoDev Project Rule 示例">
									{`# Spring Boot Controller 开发规范
## 基本原则
1. 保持Controller简洁，只处理HTTP请求和响应
2. 业务逻辑应放在Service层
3. 每个Controller方法应只做一件事

## 命名规范
- 类名: \`XxxController\` (如 \`UserController\`)
- 路径: 使用复数形式 (\`/api/users\`)
`}
								</CodeBlock>
							</div>
						</div>
					</div>
				</div>
			</div>

			{/* AI 代码自校验 */}
			<div ref={validationRef} className="mt-12">
				<div className="section-header">
					<h2 className="section-title bg-green-600">验证优先开发(VFD)</h2>
					<p className="text-slate-600">以"生成-审查-测试-优化"为核心循环，严格验证AI生成代码，应对不确定性与幻觉，保障软件质量</p>
				</div>

				<div className="container mx-auto px-4">
					<div className="grid md:grid-cols-2 gap-8">
						<div className="bg-white rounded-xl shadow-lg p-6 border border-slate-100">
							<div className="bg-blue-600 icon-circle text-white">
								<Shield className="h-6 w-6" />
							</div>
							<h3 className="text-xl font-semibold mb-4">验证技术</h3>

							<div className="space-y-4">
								<div className="bg-slate-50 p-4 rounded-lg">
									<h4 className="font-medium text-blue-700 mb-2">形式化验证</h4>
									<p className="text-slate-600 text-sm">使用数学证明验证代码是否符合形式规约，特别适用于安全关键系统</p>
								</div>

								<div className="bg-slate-50 p-4 rounded-lg">
									<h4 className="font-medium text-blue-700 mb-2">自动化测试</h4>
									<p className="text-slate-600 text-sm">单元测试、属性测试、变异测试、模糊测试等，验证功能正确性和鲁棒性</p>
								</div>

								<div className="bg-slate-50 p-4 rounded-lg">
									<h4 className="font-medium text-blue-700 mb-2">静态分析</h4>
									<p className="text-slate-600 text-sm">在不执行代码的情况下分析源代码，查找缺陷、漏洞和风格问题</p>
								</div>

								<div className="bg-slate-50 p-4 rounded-lg">
									<h4 className="font-medium text-blue-700 mb-2">动态分析</h4>
									<p className="text-slate-600 text-sm">在代码执行期间测试其行为，包括性能和运行时错误检测</p>
								</div>
							</div>
						</div>

						<div className="bg-white rounded-xl shadow-lg p-6 border border-slate-100">
							<div className="bg-blue-600 icon-circle text-white">
								<RotateCcw className="h-6 w-6" />
							</div>
							<h3 className="text-xl font-semibold mb-4">快速小步迭代</h3>

							<div className="space-y-4">
								<div className="bg-slate-50 p-4 rounded-lg">
									<h4 className="font-medium text-blue-700 mb-2">小步提交</h4>
									<p className="text-slate-600 text-sm">将大型任务拆分为小的、可独立验证的改动，频繁提交，便于追踪和回滚</p>
									<div className="mt-2 flex items-center text-sm text-green-600">
										<CheckCircle className="h-4 w-4 mr-1" />
										<span>每次提交专注于单一功能或修复</span>
									</div>
								</div>

								<div className="bg-slate-50 p-4 rounded-lg">
									<h4 className="font-medium text-blue-700 mb-2">小步校验</h4>
									<p className="text-slate-600 text-sm">每个小步骤后立即进行自动化验证，及早发现并修复问题</p>
									<div className="mt-2 flex items-center text-sm text-green-600">
										<CheckCircle className="h-4 w-4 mr-1" />
										<span>IDE 实时检查 + CI/CD 流水线自动验证</span>
									</div>
								</div>

								<div className="bg-slate-50 p-4 rounded-lg">
									<h4 className="font-medium text-blue-700 mb-2">快速反馈</h4>
									<p className="text-slate-600 text-sm">构建快速反馈循环，验证结果立即可见，指导下一步开发</p>
									<div className="mt-2 flex items-center text-sm text-green-600">
										<CheckCircle className="h-4 w-4 mr-1" />
										<span>缩短从编码到验证的时间间隔</span>
									</div>
								</div>

								<div className="bg-slate-50 p-4 rounded-lg">
									<h4 className="font-medium text-blue-700 mb-2">便捷回滚</h4>
									<p className="text-slate-600 text-sm">小步迭代使回滚更加精确和简单，降低修复成本</p>
									<div className="mt-2 flex items-center text-sm text-green-600">
										<CheckCircle className="h-4 w-4 mr-1" />
										<span>问题隔离在小范围内，易于定位和修复</span>
									</div>
								</div>
							</div>
						</div>
					</div>

					<div className="mt-12 bg-white rounded-xl shadow-lg p-6">
						<div className="flex items-center mb-6">
							<div className="bg-blue-600 icon-circle text-white">
								<RotateCcw className="h-6 w-6" />
							</div>
							<h3 className="text-xl font-semibold">自校验流程</h3>
						</div>

						<div className="grid md:grid-cols-3 gap-6">
							<div className="bg-slate-50 p-4 rounded-lg">
								<h4 className="font-medium mb-2 text-blue-700">1. 代码生成</h4>
								<p className="text-slate-600 text-sm mb-3">AI 根据提示生成初始代码，可能包含潜在问题</p>
								<div className="flex items-center text-amber-600 text-sm">
									<AlertTriangle className="h-4 w-4 mr-1" />
									<span>AI 生成代码可能存在质量和安全隐患</span>
								</div>
							</div>

							<div className="bg-slate-50 p-4 rounded-lg">
								<h4 className="font-medium mb-2 text-blue-700">2. 自动验证</h4>
								<p className="text-slate-600 text-sm mb-3">应用多层次验证技术，检查功能正确性、安全性、代码风格等</p>
								<div className="flex items-center text-blue-600 text-sm">
									<Shield className="h-4 w-4 mr-1" />
									<span>多种验证工具协同工作，形成纵深防御</span>
								</div>
							</div>

							<div className="bg-slate-50 p-4 rounded-lg">
								<h4 className="font-medium mb-2 text-blue-700">3. 修复与优化</h4>
								<p className="text-slate-600 text-sm mb-3">基于验证结果，修复问题并优化代码，可能利用 AI 辅助修复</p>
								<div className="flex items-center text-green-600 text-sm">
									<CheckCircle className="h-4 w-4 mr-1" />
									<span>小步修复，每次聚焦单一问题</span>
								</div>
							</div>
						</div>

						<div className="mt-8 p-4 bg-blue-50 rounded-lg text-center">
							<p className="text-blue-700 font-medium mb-0">
								AI 代码自校验不仅是一种技术，更是一种开发理念，强调通过自动化验证和小步迭代来确保 AI 生成代码的质量和可靠性
							</p>
						</div>
					</div>
				</div>

				<ImplementationGuide />
			</div>
		</div>
	);
};

<BrowserOnly>
	{() => <AIFriendlyArchitecture/>}
</BrowserOnly>
