"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[369],{3937:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"mcp/mcp-server","title":"AutoDev as MCP Server","description":"How to use","source":"@site/i18n/zh-Hans/docusaurus-plugin-content-docs/current/mcp/mcp-server.md","sourceDirName":"mcp","slug":"/mcp/mcp-server","permalink":"/mcp/mcp-server","draft":false,"unlisted":false,"editUrl":"https://github.com/unit-mesh/auto-dev/tree/master/docs/docs/mcp/mcp-server.md","tags":[],"version":"current","frontMatter":{"layout":"default","title":"AutoDev as MCP Server","nav_order":3,"parent":"MCP"},"sidebar":"agenticSidebar","previous":{"title":"MCP \u8c03\u8bd5\u5668","permalink":"/mcp/mcp-debugger"},"next":{"title":"AI Agent Language","permalink":"/devins/"}}');var s=t(4848),l=t(8453);const o={layout:"default",title:"AutoDev as MCP Server",nav_order:3,parent:"MCP"},c=void 0,i={},a=[{value:"How to use",id:"how-to-use",level:2},{value:"Test for Sketch call",id:"test-for-sketch-call",level:3},{value:"\u8c03\u7528\u793a\u4f8b 1",id:"\u8c03\u7528\u793a\u4f8b-1",level:4},{value:"\u8c03\u7528\u793a\u4f8b 2",id:"\u8c03\u7528\u793a\u4f8b-2",level:4}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"how-to-use",children:"How to use"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Enable the MCP server in AutoDev settings"}),"\n",(0,s.jsx)(n.li,{children:"Use the MCP client to connect to the AutoDev server (We use JetBrains MCP Proxy Server to keep same protocol)"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "mcpServers": {\n    "AutoDev": {\n      "command": "npx",\n      "args": [\n        "-y",\n        "@jetbrains/mcp-proxy"\n      ],\n      "disabled": false,\n      "autoApprove": []\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"test-for-sketch-call",children:"Test for Sketch call"}),"\n",(0,s.jsxs)(n.p,{children:["\u5de5\u5177\u5217\u8868\uff1a",(0,s.jsx)(n.a,{href:"http://127.0.0.1:63342/api/mcp/list_tools",children:"http://127.0.0.1:63342/api/mcp/list_tools"})]}),"\n",(0,s.jsx)(n.p,{children:"IDEA \u76f8\u5173 service \u7684\u7aef\u53e3\u5728 63342~63352 \u4e4b\u95f4\uff0c\u9700\u8981\u7231\u4e2a\u5c1d\u8bd5"}),"\n",(0,s.jsx)(n.h4,{id:"\u8c03\u7528\u793a\u4f8b-1",children:"\u8c03\u7528\u793a\u4f8b 1"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'\u279c  ~ curl -X POST "http://127.0.0.1:63343/api/mcp/issue_or_story_evaluate" \\\n     -H "Content-Type: application/json" \\\n     -d \'{"issue": "\u6dfb\u52a0\u6839\u636e\u4f5c\u8005\u5220\u9664\u535a\u5ba2"}\'\n\n{\n    "status": "1. \u5728 `BlogRepository` \u4e2d\u6dfb\u52a0\u6839\u636e\u4f5c\u8005\u5220\u9664\u535a\u5ba2\u7684\u65b9\u6cd5\\n   - [*] \u6dfb\u52a0 `deleteByAuthor` \u65b9\u6cd5\\n2. \u5728 `BlogService` \u4e2d\u6dfb\u52a0\u6839\u636e\u4f5c\u8005\u5220\u9664\u535a\u5ba2\u7684\u4e1a\u52a1\u903b\u8f91\\n   - [*] \u6dfb\u52a0 `deleteBlogsByAuthor` \u65b9\u6cd5\\n3. \u5728 `BlogController` \u4e2d\u6dfb\u52a0\u6839\u636e\u4f5c\u8005\u5220\u9664\u535a\u5ba2\u7684 API \u7aef\u70b9\\n   - [*] \u6dfb\u52a0 `DELETE /blog/author/{author}` \u7aef\u70b9"\n}\n'})}),"\n",(0,s.jsx)(n.h4,{id:"\u8c03\u7528\u793a\u4f8b-2",children:"\u8c03\u7528\u793a\u4f8b 2"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'\u279c  ~ curl -X POST "http://127.0.0.1:63342/api/mcp/issue_or_story_evaluate" \\\n     -H "Content-Type: application/json" \\\n     -d \'{"issue": "\u68c0\u7d22\u4ee3\u7801\u5e93\uff0c\u603b\u7ed3 Sketch \u7684\u5de5\u4f5c\u6d41\u7a0b"}\'\n\n{\n    "status": "1. \u5b9a\u4f4d\u6838\u5fc3\u5de5\u4f5c\u6d41\u7c7b\\n   - [\u2713] \u641c\u7d22\u5305\u542b \\"Workflow\\" \u548c \\"Sketch\\" \u7684\u7c7b\u5b9a\u4e49\\n   - [\u2713] \u5206\u6790 SketchRunner \u7684 execute \u65b9\u6cd5\\n2. \u89e3\u6790 AI Flow \u6267\u884c\u9636\u6bb5\\n   - [\u2713] \u8bc6\u522b\u4e0a\u4e0b\u6587\u6536\u96c6\u9636\u6bb5\\n   - [\u2713] \u5206\u6790\u5de5\u5177\u8c03\u7528\u51b3\u7b56\u6a21\u5757\\n   - [\u2713] \u8ddf\u8e2a\u4ee3\u7801\u751f\u6210\u6d41\u6c34\u7ebf\\n3. \u9a8c\u8bc1\u5de5\u4f5c\u6d41\u7a0b\u5b8c\u6574\u6027\\n   - [\u2713] \u68c0\u67e5\u5f02\u5e38\u5904\u7406\u673a\u5236\\n   - [\u2713] \u786e\u8ba4\u7248\u672c\u63a7\u5236\u96c6\u6210\u70b9"\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"\u751f\u6210\u7684 Plan \u793a\u4f8b\uff1a"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\u5b9a\u4f4d\u6838\u5fc3\u5de5\u4f5c\u6d41\u7c7b","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:'[\u2713] \u641c\u7d22\u5305\u542b "Workflow" \u548c "Sketch" \u7684\u7c7b\u5b9a\u4e49'}),"\n",(0,s.jsx)(n.li,{children:"[\u2713] \u5206\u6790 SketchRunner \u7684 execute \u65b9\u6cd5"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\u89e3\u6790 AI Flow \u6267\u884c\u9636\u6bb5","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"[\u2713] \u8bc6\u522b\u4e0a\u4e0b\u6587\u6536\u96c6\u9636\u6bb5"}),"\n",(0,s.jsx)(n.li,{children:"[\u2713] \u5206\u6790\u5de5\u5177\u8c03\u7528\u51b3\u7b56\u6a21\u5757"}),"\n",(0,s.jsx)(n.li,{children:"[\u2713] \u8ddf\u8e2a\u4ee3\u7801\u751f\u6210\u6d41\u6c34\u7ebf"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\u9a8c\u8bc1\u5de5\u4f5c\u6d41\u7a0b\u5b8c\u6574\u6027","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"[\u2713] \u68c0\u67e5\u5f02\u5e38\u5904\u7406\u673a\u5236"}),"\n",(0,s.jsx)(n.li,{children:"[\u2713] \u786e\u8ba4\u7248\u672c\u63a7\u5236\u96c6\u6210\u70b9"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Mermaid for workflow:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-mermaid",children:"graph TD\n    A[\u7528\u6237\u8f93\u5165] --\x3e B[SketchToolWindow]\n    B --\x3e C[SketchInputListener]\n    C --\x3e D[SketchRunContext]\n    D --\x3e E[\u6536\u96c6\u4e0a\u4e0b\u6587\u4fe1\u606f]\n    E --\x3e F[LanguageSketchProvider]\n    F --\x3e G{\u4efb\u52a1\u7c7b\u578b}\n    G --\x3e|Go \u8bed\u8a00| H[GoLangPlaygroundSketch]\n    G --\x3e|\u7ec8\u7aef\u547d\u4ee4| I[TerminalSketch]\n    G --\x3e|\u5176\u4ed6| J[ExtensionLangSketch]\n    H --\x3e K[\u6267\u884c\u4efb\u52a1]\n    I --\x3e K\n    J --\x3e K\n    K --\x3e L[PlanLangSketch]\n    L --\x3e M[\u751f\u6210\u4efb\u52a1\u8ba1\u5212]\n    M --\x3e N[PlanController]\n    N --\x3e O[\u66f4\u65b0\u4efb\u52a1\u72b6\u6001]\n    O --\x3e P[\u4fdd\u5b58\u5230 AgentStateService]\n    P --\x3e Q[\u53cd\u9988\u7ed3\u679c]\n    Q --\x3e B\n"})})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>c});var r=t(6540);const s={},l=r.createContext(s);function o(e){const n=r.useContext(l);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);