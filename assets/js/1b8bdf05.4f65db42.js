"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3299],{786:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>i,default:()=>c,frontMatter:()=>r,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"workflow/auto-test","title":"AutoTest","description":"\u8bbe\u8ba1\u539f\u5219","source":"@site/i18n/zh-Hans/docusaurus-plugin-content-docs/current/workflow/auto-test.md","sourceDirName":"workflow","slug":"/workflow/auto-test","permalink":"/workflow/auto-test","draft":false,"unlisted":false,"editUrl":"https://github.com/unit-mesh/auto-dev/tree/master/docs/docs/workflow/auto-test.md","tags":[],"version":"current","frontMatter":{"layout":"default","title":"AutoTest","nav_order":5,"parent":"Development"},"sidebar":"tutorialSidebar","previous":{"title":"AutoSQL","permalink":"/workflow/auto-sql"},"next":{"title":"\u5de5\u4f5c\u6d41\u7a0b","permalink":"/workflow/"}}');var l=t(4848),s=t(8453);const r={layout:"default",title:"AutoTest",nav_order:5,parent:"Development"},i="\u81ea\u52a8\u5316\u6d4b\u8bd5\u8bbe\u8ba1",a={},d=[{value:"\u8bbe\u8ba1\u539f\u5219",id:"\u8bbe\u8ba1\u539f\u5219",level:2},{value:"\u6d4b\u8bd5\u63d0\u793a\u6a21\u677f",id:"\u6d4b\u8bd5\u63d0\u793a\u6a21\u677f",level:2},{value:"\u8d44\u6e90",id:"\u8d44\u6e90",level:2},{value:"TestSpark",id:"testspark",level:3},{value:"\u65b9\u6cd5\u4e00\uff1aLLM\u751f\u6210\u63d0\u793a\u793a\u4f8b",id:"\u65b9\u6cd5\u4e00llm\u751f\u6210\u63d0\u793a\u793a\u4f8b",level:4},{value:"\u65b9\u6cd5\u4e8c\uff1aEvoSuite\u751f\u6210",id:"\u65b9\u6cd5\u4e8cevosuite\u751f\u6210",level:4}];function u(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"\u81ea\u52a8\u5316\u6d4b\u8bd5\u8bbe\u8ba1",children:"\u81ea\u52a8\u5316\u6d4b\u8bd5\u8bbe\u8ba1"})}),"\n",(0,l.jsx)(n.h2,{id:"\u8bbe\u8ba1\u539f\u5219",children:"\u8bbe\u8ba1\u539f\u5219"}),"\n",(0,l.jsx)(n.p,{children:"\u521b\u5efa\u89c4\u5219\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u82e5\u6d4b\u8bd5\u4ee3\u7801\u5df2\u5b58\u5728\u4e14LLM\u8fd4\u56de\u5305\u542bimport\u8bed\u53e5\uff0cAutoDev\u5c06\u66ff\u6362\u6240\u6709\u4ee3\u7801"}),"\n",(0,l.jsx)(n.li,{children:"\u82e5\u6d4b\u8bd5\u4ee3\u7801\u5df2\u5b58\u5728\u4e14LLM\u8fd4\u56de\u4e0d\u5305\u542bimport\u8bed\u53e5\uff0cAutoDev\u5c06\u5728\u6700\u540e\u4e00\u4e2aimport\u8bed\u53e5\u540e\u63d2\u5165\u6d4b\u8bd5\u4ee3\u7801"}),"\n",(0,l.jsx)(n.li,{children:"\u82e5\u6d4b\u8bd5\u4ee3\u7801\u4e0d\u5b58\u5728\uff0cAutoDev\u5c06\u76f4\u63a5\u63d2\u5165\u6d4b\u8bd5\u4ee3\u7801"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u8fd0\u884c\u89c4\u5219\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u82e5\u8fd0\u884c\u914d\u7f6e\u5df2\u5b58\u5728\uff0cAutoDev\u5c06\u521b\u5efa\u65b0\u7684\u8fd0\u884c\u914d\u7f6e"}),"\n",(0,l.jsx)(n.li,{children:"\u82e5\u8fd0\u884c\u914d\u7f6e\u4e0d\u5b58\u5728\uff0cAutoDev\u5c06\u521b\u5efa\u65b0\u7684\u8fd0\u884c\u914d\u7f6e"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["\u66f4\u591a\u7ec6\u8282\u8bf7\u53c2\u8003",(0,l.jsx)(n.a,{href:"https://github.com/unit-mesh/auto-dev/blob/master/src/main/kotlin/cc/unitmesh/devti/provider/AutoTestService.kt",children:"AutoTestService"})]}),"\n",(0,l.jsx)(n.h2,{id:"\u6d4b\u8bd5\u63d0\u793a\u6a21\u677f",children:"\u6d4b\u8bd5\u63d0\u793a\u6a21\u677f"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-markdown",children:'    \u4e3a\u4ee5\u4e0bKotlin\u4ee3\u7801\u7f16\u5199\u5355\u5143\u6d4b\u8bd5\u3002\n    \n    \u60a8\u6b63\u5728\u4f7f\u7528Spring MVC\u548cSpring WebFlux\u6784\u5efaRESTful API\u7684\u9879\u76ee\u4e2d\u5de5\u4f5c\u3002\n    - \u6d4b\u8bd5\u65b9\u6cd5\u540d\u5fc5\u987b\u4f7f\u7528should_xx_xx\u683c\u5f0f\uff0c\u5fc5\u987b\u4f7f\u7528given-when-then\u7ed3\u6784\n    - \u6d4b\u8bd5\u6587\u4ef6\u5e94\u5b8c\u6574\u4e14\u53ef\u76f4\u63a5\u7f16\u8bd1\uff0c\u65e0\u9700\u989d\u5916\u64cd\u4f5c\n    - \u786e\u4fdd\u6bcf\u4e2a\u6d4b\u8bd5\u4ec5\u5173\u6ce8\u5355\u4e00\u7528\u4f8b\u4ee5\u4fdd\u6301\u6e05\u6670\u53ef\u8bfb\n    - \u4e0d\u8981\u4f7f\u7528@BeforeEach\u8fdb\u884c\u521d\u59cb\u5316\uff0c\u6240\u6709\u5fc5\u8981\u4ee3\u7801\u90fd\u5e94\u5305\u542b\u5728\u5355\u4e2a\u6d4b\u8bd5\u65b9\u6cd5\u4e2d\uff0c\u4e0d\u8981\u7f16\u5199\u53c2\u6570\u5316\u6d4b\u8bd5\n    - \u9879\u76ee\u4f7f\u7528JUnit 5\uff0c\u9700\u5bfc\u5165`org.junit.jupiter.api.Test`\u5e76\u4f7f\u7528@Test\u6ce8\u89e3\n    - \u4f7f\u7528\u5408\u9002\u7684Spring\u6d4b\u8bd5\u6ce8\u89e3\u5982@MockBean\u3001@Autowired\u3001@WebMvcTest\u3001@DataJpaTest\u3001@AutoConfigureTestDatabase\u3001@AutoConfigureMockMvc\u3001@SpringBootTest\u7b49\n      \u53c2\u8003\u6a21\u677f\u793a\u4f8b\uff1a\n    \\```Kotlin\n    // \u5fc5\u987b\u4f7f\u7528@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n    @SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n    @ExtendWith(SpringExtension::class)\n    class PluginControllerTest {\n    \n        private lateinit var mockMvc: MockMvc\n    \n        @BeforeEach\n        fun setup() {\n            // \u53ef\u4f7f\u7528MockMvcBuilders.standaloneSetup()\u6784\u5efamockMvc\n            mockMvc = MockMvcBuilders.standaloneSetup(PluginController()).build()\n        }\n    \n        @Test\n        fun shouldReturnPluginTypes() {\n            mockMvc.perform(get("/api/plugin/type"))\n                .andExpect(status().isOk)\n                .andExpect(jsonPath("$[0]").value("DUBBO"))\n        }\n    }\n    \n    \\```\n    \n    - Kotlin API\u7248\u672c\uff1a1.9\n    \n    // \u76f8\u5173\u7c7b\u4fe1\u606f\uff1a\n    // \'package: com.thoughtworks.archguard.evolution.domain.BadSmellSuite\n    // class BadSmellSuite {\n    //   id\n    //   suiteName\n    //   isDefault\n    //   thresholds\n    //   \n    // }\n    // \'package: com.thoughtworks.archguard.evolution.domain.BadSmellSuiteWithSelected\n    // class BadSmellSuiteWithSelected {\n    //   id\n    //   suiteName\n    //   isDefault\n    //   isSelected\n    //   thresholds\n    //   \n    // }\n    // \'package: com.thoughtworks.archguard.evolution.domain.BadSmellThresholdService\n    // \'@Service\n    // class BadSmellThresholdService {\n    //   badSmellSuitRepository\n    //   + fun getAllSuits(): List<BadSmellSuite>\n    //   + fun getBadSmellSuiteWithSelectedInfoBySystemId(systemId: Long): List<BadSmellSuiteWithSelected>\n    // }\n    \n    // \u5f53\u524d\u7c7b\u4fe1\u606f\uff1a\n    // \'package: com.thoughtworks.archguard.evolution.controller.EvolutionBadSmellController\n    // \'@RestController, @RequestMapping("/api/evolution")\n    // class EvolutionBadSmellController {\n    //   badSmellThresholdService\n    //   + @GetMapping("/badsmell-thresholds")     fun getAllThresholds(): List<BadSmellSuite>\n    //   + @GetMapping("/badsmell-thresholds/system/{systemId}")     fun getThresholdsBySystemId(@PathVariable("systemId") systemId: Long): List<BadSmellSuiteWithSelected>\n    // }\n    \n    \u4ee3\u7801\uff1a\n    // import com.thoughtworks.archguard.evolution.domain.BadSmellSuite\n    // import com.thoughtworks.archguard.evolution.domain.BadSmellSuiteWithSelected\n    // import com.thoughtworks.archguard.evolution.domain.BadSmellThresholdService\n    // import org.springframework.web.bind.annotation.GetMapping\n    // import org.springframework.web.bind.annotation.PathVariable\n    // import org.springframework.web.bind.annotation.RequestMapping\n    // import org.springframework.web.bind.annotation.RestController\n    \\```kotlin\n    @RestController\n    @RequestMapping("/api/evolution")\n    class EvolutionBadSmellController(val badSmellThresholdService: BadSmellThresholdService) {\n    \n        @GetMapping("/badsmell-thresholds")\n        fun getAllThresholds(): List<BadSmellSuite> {\n            return badSmellThresholdService.getAllSuits()\n        }\n    \n        @GetMapping("/badsmell-thresholds/system/{systemId}")\n        fun getThresholdsBySystemId(@PathVariable("systemId") systemId: Long): List<BadSmellSuiteWithSelected> {\n            return badSmellThresholdService.getBadSmellSuiteWithSelectedInfoBySystemId(systemId)\n        }\n    }\n    \\```\n    \n    \u8bf7\u4eceimport\u8bed\u53e5\u5f00\u59cb\u7f16\u5199\uff1a\n'})}),"\n",(0,l.jsx)(n.h2,{id:"\u8d44\u6e90",children:"\u8d44\u6e90"}),"\n",(0,l.jsx)(n.h3,{id:"testspark",children:"TestSpark"}),"\n",(0,l.jsx)(n.p,{children:"TestSpark\u76ee\u524d\u652f\u6301\u4e24\u79cd\u6d4b\u8bd5\u751f\u6210\u7b56\u7565\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u57fa\u4e8eLLM\u7684\u6d4b\u8bd5\u751f\u6210\uff08\u4f7f\u7528OpenAI\u548cJetBrains\u5185\u90e8AI Assistant\u5e73\u53f0\uff09"}),"\n",(0,l.jsx)(n.li,{children:"\u57fa\u4e8e\u672c\u5730\u641c\u7d22\u7684\u6d4b\u8bd5\u751f\u6210\uff08\u4f7f\u7528EvoSuite\uff09"}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"\u65b9\u6cd5\u4e00llm\u751f\u6210\u63d0\u793a\u793a\u4f8b",children:"\u65b9\u6cd5\u4e00\uff1aLLM\u751f\u6210\u63d0\u793a\u793a\u4f8b"}),"\n",(0,l.jsxs)(n.p,{children:["GitHub: ",(0,l.jsx)(n.a,{href:"https://github.com/JetBrains-Research/TestSpark/blob/development/src/main/resources/defaults/TestSpark.properties",children:"TestSpark"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-vtl",children:"\u4e3a$NAME\u751f\u6210$LANGUAGE\u5355\u5143\u6d4b\u8bd5\u4ee5\u5b9e\u73b0100%\u884c\u8986\u76d6\u3002\n\u4e0d\u8981\u4f7f\u7528@Before\u548c@After\u6d4b\u8bd5\u65b9\u6cd5\u3002\n\u4fdd\u6301\u6d4b\u8bd5\u539f\u5b50\u6027\u3002\n\u6240\u6709\u6d4b\u8bd5\u5e94\u57fa\u4e8e$TESTING_PLATFORM\u3002\n\u5982\u9700mock\u8bf7\u4f7f\u7528$MOCKING_FRAMEWORK\uff0c\u4f46\u4e0d\u8981\u6240\u6709\u6d4b\u8bd5\u90fd\u4f7f\u7528mock\u3002\n\u6d4b\u8bd5\u65b9\u6cd5\u547d\u540d\u9075\u5faa[MethodUnderTest][Scenario]Test\u6a21\u677f\uff0c\u4ec5\u4f7f\u7528\u82f1\u6587\u5b57\u6bcd\u3002\n\u88ab\u6d4b\u7c7b\u6e90\u7801\uff1a\n$CODE\n\u4ee5\u4e0b\u662f\u88ab\u6d4b\u7c7b\u4f7f\u7528\u7684\u65b9\u6cd5\u548c\u7c7b\u7684\u76f8\u5173\u4fe1\u606f\uff0c\u8bf7\u4ec5\u7528\u4e8e\u521b\u5efa\u5bf9\u8c61\uff1a\n$METHODS\n$POLYMORPHISM\n$TEST_SAMPLE\n"})}),"\n",(0,l.jsx)(n.h4,{id:"\u65b9\u6cd5\u4e8cevosuite\u751f\u6210",children:"\u65b9\u6cd5\u4e8c\uff1aEvoSuite\u751f\u6210"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.a,{href:"https://www.evosuite.org/",children:"EvoSuite"})," \u662f\u4e00\u4e2a\u80fd\u591f\u81ea\u52a8\u751f\u6210\u5e26\u6709Java\u65ad\u8a00\u6d4b\u8bd5\u7684\u5de5\u5177\u3002"]})]})}function c(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(u,{...e})}):u(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>i});var o=t(6540);const l={},s=o.createContext(l);function r(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);