"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3953],{4788:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>u,frontMatter:()=>l,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"mcp/mcp-client","title":"AutoDev \u4f5c\u4e3a MCP \u5ba2\u6237\u7aef","description":"\u7531\u4e8e\u9700\u8981\u652f\u6301 AutoDev DevIns \u4f7f\u7528 MCP \u5de5\u5177\uff0c\u76ee\u524d\u6211\u4eec\u4ec5\u652f\u6301\u57fa\u4e8e\u6807\u51c6\u8f93\u5165\u8f93\u51fa\u7684\u4f20\u8f93\u65b9\u5f0f\u3002","source":"@site/i18n/zh-Hans/docusaurus-plugin-content-docs/current/mcp/mcp-client.md","sourceDirName":"mcp","slug":"/mcp/mcp-client","permalink":"/mcp/mcp-client","draft":false,"unlisted":false,"editUrl":"https://github.com/unit-mesh/auto-dev/tree/master/docs/docs/mcp/mcp-client.md","tags":[],"version":"current","frontMatter":{"layout":"default","title":"AutoDev \u4f5c\u4e3a MCP \u5ba2\u6237\u7aef","nav_order":2,"parent":"MCP"},"sidebar":"agenticSidebar","previous":{"title":"\u5f00\u53d1MCP\u670d\u52a1\u5668","permalink":"/mcp/development"},"next":{"title":"MCP \u8c03\u8bd5\u5668","permalink":"/mcp/mcp-debugger"}}');var r=t(4848),i=t(8453);const l={layout:"default",title:"AutoDev \u4f5c\u4e3a MCP \u5ba2\u6237\u7aef",nav_order:2,parent:"MCP"},o=void 0,a={},c=[{value:"\u4f7f\u7528\u65b9\u6cd5",id:"\u4f7f\u7528\u65b9\u6cd5",level:2},{value:"MCP \u4f5c\u4e3a DevIns \u6307\u4ee4\u4f7f\u7528",id:"mcp-\u4f5c\u4e3a-devins-\u6307\u4ee4\u4f7f\u7528",level:3},{value:"\u501f\u52a9\u672c\u5730\u667a\u80fd\u4f53\u751f\u6210\u8c03\u7528",id:"\u501f\u52a9\u672c\u5730\u667a\u80fd\u4f53\u751f\u6210\u8c03\u7528",level:3}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"\u7531\u4e8e\u9700\u8981\u652f\u6301 AutoDev DevIns \u4f7f\u7528 MCP \u5de5\u5177\uff0c\u76ee\u524d\u6211\u4eec\u4ec5\u652f\u6301\u57fa\u4e8e\u6807\u51c6\u8f93\u5165\u8f93\u51fa\u7684\u4f20\u8f93\u65b9\u5f0f\u3002"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\u4f7f\u7528\u65b9\u6cd5",children:"\u4f7f\u7528\u65b9\u6cd5"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\u5728 ",(0,r.jsx)(n.code,{children:"Settings"})," \u2192 ",(0,r.jsx)(n.code,{children:"AutoDev"})," \u2192 ",(0,r.jsx)(n.code,{children:"Custom Agent"})," \u7684 MCP Servers \u4e2d\u914d\u7f6e\u5ba2\u6237\u7aef"]}),"\n",(0,r.jsx)(n.li,{children:"\u6dfb\u52a0\u60a8\u7684 MCP \u670d\u52a1\u5668\uff0c\u4f8b\u5982\uff1a"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "mcpServers": {\n    "filesystem": {\n      "command": "npx",\n      "args": [\n        "-y",\n        "@modelcontextprotocol/server-filesystem",\n        "/Volumes/source/ai/autocrud"\n      ]\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Java \u793a\u4f8b\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "mcpServers": {\n    "weather": {\n      "command": "java",\n      "args": [\n        "-jar",\n        "/Volumes/source/ai/autodev-mcp-test/kotlin-weather-stdio-server/build/libs/weather-stdio-server-0.1.0-all.jar"\n      ]\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Python + UV \u793a\u4f8b\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "mcpServers": {\n    "echo": {\n      "command": "uv",\n      "args": [\n        "run",\n        "--with",\n        "--directory",\n        "/Users/phodal/source/ai/autodev-mcp-test/python-sqlite3/",\n        "mcp",\n        "mcp",\n        "run",\n        "/Users/phodal/source/ai/autodev-mcp-test/python-sqlite3/server.py"\n      ]\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"mcp-\u4f5c\u4e3a-devins-\u6307\u4ee4\u4f7f\u7528",children:"MCP \u4f5c\u4e3a DevIns \u6307\u4ee4\u4f7f\u7528"}),"\n",(0,r.jsxs)(n.p,{children:["\u5728 AutoDev \u4e2d\uff0cMCP \u5de5\u5177\u4f1a\u88ab\u8f6c\u6362\u4e3a DevIns \u6307\u4ee4\u3002\u4f8b\u5982 ",(0,r.jsx)(n.code,{children:"read_multiple_files"})," \u5de5\u5177\u4f1a\u88ab\u8f6c\u6362\u4e3a\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<tool>name: read_multiple_files, desc: \u540c\u65f6\u8bfb\u53d6\u591a\u4e2a\u6587\u4ef6\u5185\u5bb9\u3002\u5f53\u9700\u8981\u5206\u6790\u6216\u6bd4\u8f83\u591a\u4e2a\u6587\u4ef6\u65f6\uff0c\u8fd9\u6bd4\u9010\u4e2a\u8bfb\u53d6\u66f4\u9ad8\u6548\u3002\u6bcf\u4e2a\u6587\u4ef6\u5185\u5bb9\u5c06\u4e0e\u5176\u8def\u5f84\u4e00\u8d77\u8fd4\u56de\u3002\u5355\u4e2a\u6587\u4ef6\u8bfb\u53d6\u5931\u8d25\u4e0d\u4f1a\u4e2d\u65ad\u6574\u4e2a\u64cd\u4f5c\u3002\u4ec5\u5728\u5141\u8bb8\u7684\u76ee\u5f55\u5185\u6709\u6548\u3002, example:\n    <devin>\n        \u4ee5\u4e0b\u662f\u547d\u4ee4\u548c JSON \u7ed3\u6784\n        /read_multiple_files\n        ```json\n        {"properties":{"paths":{"type":"array","items":{"type":"string"}}},"required":["paths"]}\n        \\```\n    </devin>\n</tool>\n'})}),"\n",(0,r.jsxs)(n.p,{children:["\u5728\u4f7f\u7528\u65f6\uff0c\u60a8\u53ef\u4ee5\u76f4\u63a5\u5728\u8f93\u5165\u6846\u67b6\u4e2d\u8f93\u5165 ",(0,r.jsx)(n.code,{children:"/"})," \u6765\u89e6\u53d1\u81ea\u52a8\u8865\u5168\uff0c\u9009\u62e9 ",(0,r.jsx)(n.code,{children:"read_multiple_files"})," \u5de5\u5177\u3002"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:t(6286).A+"",width:"1444",height:"860"})}),"\n",(0,r.jsx)(n.p,{children:"\u968f\u540e Sketch \u548c Bridge \u667a\u80fd\u4f53\u5c31\u53ef\u4ee5\u5728 DevIns \u6307\u4ee4\u4e2d\u4f7f\u7528\u8be5\u5de5\u5177\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"\u501f\u52a9\u672c\u5730\u667a\u80fd\u4f53\u751f\u6210\u8c03\u7528",children:"\u501f\u52a9\u672c\u5730\u667a\u80fd\u4f53\u751f\u6210\u8c03\u7528"}),"\n",(0,r.jsxs)(n.p,{children:["\u5728 AutoDev 2.1.0 \u7248\u672c\u4e2d\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528",(0,r.jsx)(n.a,{href:"/local-agent",children:"\u672c\u5730\u667a\u80fd\u4f53"}),"\u6765\u8c03\u7528 MCP \u5de5\u5177\u3002"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\u5148\u5728\u9879\u76ee\u4e2d\u521b\u5efa\u4e00\u4e2a ",(0,r.jsx)(n.code,{children:"demo.mcp.json"})," \u7684\u6587\u4ef6\uff0c\u7c98\u8d34\u4f60\u7684 MCP \u5de5\u5177\u914d\u7f6e"]}),"\n",(0,r.jsxs)(n.li,{children:["\u83b7\u53d6 MCP \u8c03\u7528\u7684\u63d0\u793a\u8bcd","\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u70b9\u51fb MCP \u7684\u9884\u89c8"}),"\n",(0,r.jsx)(n.li,{children:"\u7b49\u5f85\u5de5\u5177\u52a0\u8f7d\u5b8c\u6210"}),"\n",(0,r.jsxs)(n.li,{children:["\u70b9\u51fb ",(0,r.jsx)(n.code,{children:"\u914d\u7f6e"})," \u6309\u94ae\uff0c\u4ece\u4e2d\u83b7\u53d6\u63d0\u793a\u8bcd\u62ff\u5230 JSON Schema"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\u5728 ",(0,r.jsx)(n.code,{children:"prompts"})," \u76ee\u5f55\u4e0b\u521b\u5efa ",(0,r.jsx)(n.code,{children:"mcp.devin"})," \u7684\u6587\u4ef6\uff0c\u7c98\u8d34\u83b7\u53d6\u7684\u63d0\u793a\u8bcd"]}),"\n",(0,r.jsxs)(n.li,{children:["\u5728 ",(0,r.jsx)(n.code,{children:"mcp.devin"})," \u4e2d\uff0c\u6dfb\u52a0 name, description, ",(0,r.jsx)(n.code,{children:"agentic: true"})," \u7684\u914d\u7f6e"]}),"\n",(0,r.jsx)(n.li,{children:"\u5173\u95ed AutoDev Chat\uff0c\u518d\u521b\u5efa\u4e00\u4e2a\u65b0\u7684 Chat \u7a97\u53e3\uff0c\u9009\u62e9 MCP \u667a\u80fd\u4f53\u6765\u5b9e\u73b0"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u5982\u4e0b\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-vtl",children:'---\nname: "MCP"\ndescription: "MCP"\nagentic: true\n---\n\nYou are Sketch, a powerful agentic AI coding assistant designed to use tools to resolve user\'s question.\n\nIn this environment you have access to a set of tools you can use to answer the user\'s question.\n\nIf the USER\'s task is general or you already know the answer, just respond without calling tools.\nFollow these rules regarding tool calls:\n1. ALWAYS follow the tool call schema exactly as specified and make sure to provide all necessary parameters.\n2. The conversation may reference tools that are no longer available. NEVER call tools that are not explicitly provided.\n3. If the USER asks you to disclose your tools, ALWAYS respond with the following helpful description: <description>\n\nHere are the functions available in JSONSchema format:\n<functions>\n    <function>{"name":"listAllTablesName","description":"Return all table names in the database separated by comma. This is useful for getting a quick overview of the database structure.","inputSchema":{"required":[]}}</function>\n    <function>{"name":"queryBySql","description":"Execute a select SQL query and return results in a readable format. Results will be truncated after 4000 characters. Will throw an exception if the query is not a SELECT statement.","inputSchema":{"properties":{"sql":{"type":"string"}},"required":["sql"]}}</function>\n    <function>{"name":"getTableSchema","description":"Returns schema and relation information for the given table. Includes column name, data type and constraints. This is useful for understanding the structure of a specific table.","inputSchema":{"properties":{"tableName":{"type":"string"}},"required":["tableName"]}}</function>\n</functions>\n\nAnswer the user\'s request using the relevant tool(s), if they are available. Check that all the required parameters for each tool call are provided or can reasonably be inferred from context. IF there are no relevant tools or there are missing values for required parameters, ask the user to supply these values; otherwise proceed with the tool calls. If the user provides a specific value for a parameter (for example provided in quotes), make sure to use that value EXACTLY. DO NOT make up values for or ask about optional parameters. Carefully analyze descriptive terms in the request as they may indicate required parameter values that should be included even if not explicitly quoted.\n\nIf you intend to call multiple tools and there are no dependencies between the calls, make all of the independent calls in the same <devin> block.\n\nYou can use tools by writing a "<devin>" inside markdown code-block like the following as part of your reply to the user:\n\n    <devin>\n    /FUNCTION_NAME\n    ```json\n    { "$PARAMETER_NAME": "$PARAMETER_VALUE" }\n'})}),"\n",(0,r.jsx)(n.p,{children:"String and scalar parameters should be specified as is, while lists and objects should use JSON format."}),"\n",(0,r.jsx)(n.p,{children:"User's question: $input"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'\n### \u6d4b\u8bd5 MCP \u670d\u52a1\u5668\n\n\u65b0\u5efa `sample.devin` \u6587\u4ef6\u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9\uff1a\n\n     /list_directory\n     ```json\n     {\n      "path": "/Volumes/source/ai/autocrud/docs/mcp"\n     }\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u540e\uff0c\u5c06\u8fd4\u56de\u76ee\u5f55\u4e2d\u7684\u6587\u4ef6\u5217\u8868\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'Execute list_directory tool\'s result\n[\n    {\n        "text": "[FILE] mcp-client.md\\n[FILE] mcp-server.md\\n[FILE] mcp.md"\n    }\n]\n'})})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},6286:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/select-mcp-tools-e819d59743bf684b79331a7965b27dd3.png"},8453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>o});var s=t(6540);const r={},i=s.createContext(r);function l(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);