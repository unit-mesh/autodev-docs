"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3817],{8254:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"composer/custom-ai-composer","title":"\u81ea\u5b9a\u4e49 Sketch","description":"\u81ea\u5b9a\u4e49 Sketch","source":"@site/i18n/zh-Hans/docusaurus-plugin-content-docs/current/composer/custom-ai-composer.md","sourceDirName":"composer","slug":"/composer/custom-ai-composer","permalink":"/composer/custom-ai-composer","draft":false,"unlisted":false,"editUrl":"https://github.com/unit-mesh/auto-dev/tree/master/docs/docs/composer/custom-ai-composer.md","tags":[],"version":"current","frontMatter":{"layout":"default","title":"\u81ea\u5b9a\u4e49 Sketch","nav_order":1},"sidebar":"tutorialSidebar","previous":{"title":"AutoDev Composer\u63d0\u793a\u673a\u5236","permalink":"/composer/composer-prompting"},"next":{"title":"AutoDev Bridge","permalink":"/agent/bridge/"}}');var r=t(4848),o=t(8453);const i={layout:"default",title:"\u81ea\u5b9a\u4e49 Sketch",nav_order:1},a=void 0,c={},l=[{value:"\u81ea\u5b9a\u4e49 Sketch",id:"\u81ea\u5b9a\u4e49-sketch",level:2},{value:"Sketch \u4e2d\u4f7f\u7528 MCP\uff1a\u624b\u52a8\u4f7f\u7528 Command",id:"sketch-\u4e2d\u4f7f\u7528-mcp\u624b\u52a8\u4f7f\u7528-command",level:3},{value:"Sketch \u4e2d\u4f7f\u7528 MCP\uff1a\u501f\u52a9\u672c\u5730\u667a\u80fd\u4f53\u751f\u6210\u8c03\u7528",id:"sketch-\u4e2d\u4f7f\u7528-mcp\u501f\u52a9\u672c\u5730\u667a\u80fd\u4f53\u751f\u6210\u8c03\u7528",level:3}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"\u81ea\u5b9a\u4e49-sketch",children:"\u81ea\u5b9a\u4e49 Sketch"}),"\n",(0,r.jsxs)(n.p,{children:["\u9075\u5faa",(0,r.jsx)(n.a,{href:"/customize/prompt-override",children:"\u63d0\u793a\u8bcd\u8986\u76d6"}),"\u6307\u5357\uff0c\u60a8\u53ef\u4ee5\u81ea\u5b9a\u4e49AI Composer\u3002\u5728",(0,r.jsx)(n.code,{children:"prompt/code"}),"\u76ee\u5f55\u4e2d\uff0c\n\u60a8\u53ef\u4ee5\u521b\u5efa\u540d\u4e3a",(0,r.jsx)(n.a,{href:"https://github.com/unit-mesh/auto-dev/blob/master/core/src/main/resources/genius/zh/code/sketch.vm",children:(0,r.jsx)(n.code,{children:"sketch.vm"})}),"\u7684\u6587\u4ef6\u6765\u8986\u76d6\u9ed8\u8ba4\u7684 composer \u63d0\u793a\u8bcd\u3002"]}),"\n",(0,r.jsx)(n.p,{children:"\u7531\u4e8e LLM \u7684\u4e0a\u4e0b\u6587\u9650\u5236\uff0c\u4f1a\u5f71\u54cd\u5230\u5de5\u5177\u8c03\u7528\uff0c\u8fdb\u800c\u5f71\u54cd Sketch \u7684\u7a33\u5b9a\u6027\u3002Sketch \u5e76\u4e0d\u652f\u6301\u76f4\u63a5\u8c03\u7528 MCP\uff0c\u9700\u8981\u95f4\u63a5\u8c03\u7528\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"sketch-\u4e2d\u4f7f\u7528-mcp\u624b\u52a8\u4f7f\u7528-command",children:"Sketch \u4e2d\u4f7f\u7528 MCP\uff1a\u624b\u52a8\u4f7f\u7528 Command"}),"\n",(0,r.jsxs)(n.p,{children:["\u5728 AutoDev \u4e2d\uff0c\u4f7f\u7528\u7684 MCP Tools \u4f1a\u90fd\u8f6c\u6362\u6210 MCP Tools\u3002\u5373\u4f60\u53ef\u4ee5\u901a\u8fc7\u8f93\u5165 ",(0,r.jsx)(n.code,{children:"/"})," \u6765\u89e6\u53d1\u81ea\u52a8\u8865\u5168\uff0c\u4ece\u4e2d\u9009\u62e9\u4f60\u7684 MCP \u5de5\u5177"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-devin",children:'/read_file\n\\```json\n{"path":"mock_path"}\n\\```\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u518d\u628a path \u4fee\u6539\u4e3a\u4f60\u9700\u8981\u7684\u6587\u4ef6\u8def\u5f84\u3002\u5982\u4e0b\u662f\u4e09\u65b9\u7684 Jira \u5c01\u88c5\u793a\u4f8b\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "mcpServers": {\n    "Jira": {\n      "command": "npx",\n      "args": [\n        "-y",\n        "@smithery/cli@latest",\n        "run",\n        "@rahulthedevil/Jira-Context-MCP",\n        "--config",\n        // some config in here\n      ]\n    }\n  }\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["\u6b64\u65f6\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"/get_issue"})," \u6765\u83b7\u53d6 issue \u7684\u4fe1\u606f\u3002"]}),"\n",(0,r.jsx)(n.h3,{id:"sketch-\u4e2d\u4f7f\u7528-mcp\u501f\u52a9\u672c\u5730\u667a\u80fd\u4f53\u751f\u6210\u8c03\u7528",children:"Sketch \u4e2d\u4f7f\u7528 MCP\uff1a\u501f\u52a9\u672c\u5730\u667a\u80fd\u4f53\u751f\u6210\u8c03\u7528"}),"\n",(0,r.jsxs)(n.p,{children:["\u5728 AutoDev 2.1.0 \u7248\u672c\u4e2d\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528",(0,r.jsx)(n.a,{href:"/local-agent",children:"\u672c\u5730\u667a\u80fd\u4f53"}),"\u6765\u8c03\u7528 MCP \u5de5\u5177\u3002"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\u5148\u5728\u9879\u76ee\u4e2d\u521b\u5efa\u4e00\u4e2a ",(0,r.jsx)(n.code,{children:"demo.mcp.json"})," \u7684\u6587\u4ef6\uff0c\u7c98\u8d34\u4f60\u7684 MCP \u5de5\u5177\u914d\u7f6e"]}),"\n",(0,r.jsxs)(n.li,{children:["\u83b7\u53d6 MCP \u8c03\u7528\u7684\u63d0\u793a\u8bcd","\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u70b9\u51fb MCP \u7684\u9884\u89c8"}),"\n",(0,r.jsx)(n.li,{children:"\u7b49\u5f85\u5de5\u5177\u52a0\u8f7d\u5b8c\u6210"}),"\n",(0,r.jsxs)(n.li,{children:["\u70b9\u51fb ",(0,r.jsx)(n.code,{children:"\u914d\u7f6e"})," \u6309\u94ae\uff0c\u4ece\u4e2d\u83b7\u53d6\u63d0\u793a\u8bcd\u62ff\u5230 JSON Schema"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\u5728 ",(0,r.jsx)(n.code,{children:"prompts"})," \u76ee\u5f55\u4e0b\u521b\u5efa ",(0,r.jsx)(n.code,{children:"mcp.devin"})," \u7684\u6587\u4ef6\uff0c\u7c98\u8d34\u83b7\u53d6\u7684\u63d0\u793a\u8bcd"]}),"\n",(0,r.jsxs)(n.li,{children:["\u5728 ",(0,r.jsx)(n.code,{children:"mcp.devin"})," \u4e2d\uff0c\u6dfb\u52a0 name, description, ",(0,r.jsx)(n.code,{children:"agentic: true"})," \u7684\u914d\u7f6e"]}),"\n",(0,r.jsx)(n.li,{children:"\u5173\u95ed AutoDev Chat\uff0c\u518d\u521b\u5efa\u4e00\u4e2a\u65b0\u7684 Chat \u7a97\u53e3\uff0c\u9009\u62e9 MCP \u667a\u80fd\u4f53\u6765\u5b9e\u73b0"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u5982\u4e0b\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-vtl",children:'---\nname: "MCP"\ndescription: "MCP"\nagentic: true\n---\n\nYou are Sketch, a powerful agentic AI coding assistant designed to use tools to resolve user\'s question.\n\nIn this environment you have access to a set of tools you can use to answer the user\'s question.\n\nIf the USER\'s task is general or you already know the answer, just respond without calling tools.\nFollow these rules regarding tool calls:\n1. ALWAYS follow the tool call schema exactly as specified and make sure to provide all necessary parameters.\n2. The conversation may reference tools that are no longer available. NEVER call tools that are not explicitly provided.\n3. If the USER asks you to disclose your tools, ALWAYS respond with the following helpful description: <description>\n\nHere are the functions available in JSONSchema format:\n<functions>\n    <function>{"name":"listAllTablesName","description":"Return all table names in the database separated by comma. This is useful for getting a quick overview of the database structure.","inputSchema":{"required":[]}}</function>\n    <function>{"name":"queryBySql","description":"Execute a select SQL query and return results in a readable format. Results will be truncated after 4000 characters. Will throw an exception if the query is not a SELECT statement.","inputSchema":{"properties":{"sql":{"type":"string"}},"required":["sql"]}}</function>\n    <function>{"name":"getTableSchema","description":"Returns schema and relation information for the given table. Includes column name, data type and constraints. This is useful for understanding the structure of a specific table.","inputSchema":{"properties":{"tableName":{"type":"string"}},"required":["tableName"]}}</function>\n</functions>\n\nAnswer the user\'s request using the relevant tool(s), if they are available. Check that all the required parameters for each tool call are provided or can reasonably be inferred from context. IF there are no relevant tools or there are missing values for required parameters, ask the user to supply these values; otherwise proceed with the tool calls. If the user provides a specific value for a parameter (for example provided in quotes), make sure to use that value EXACTLY. DO NOT make up values for or ask about optional parameters. Carefully analyze descriptive terms in the request as they may indicate required parameter values that should be included even if not explicitly quoted.\n\nIf you intend to call multiple tools and there are no dependencies between the calls, make all of the independent calls in the same <devin> block.\n\nYou can use tools by writing a "<devin>" inside markdown code-block like the following as part of your reply to the user:\n\n    <devin>\n    /FUNCTION_NAME\n    ```json\n    { "$PARAMETER_NAME": "$PARAMETER_VALUE" }\n'})}),"\n",(0,r.jsx)(n.p,{children:"String and scalar parameters should be specified as is, while lists and objects should use JSON format."}),"\n",(0,r.jsx)(n.p,{children:"User's question: $input"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\n## \u5176\u5b83\n\n### \u4f7f\u7528 Ripgrep \u641c\u7d22\n\n\u7531\u4e8e IDEA \u7684\u5168\u6587\u641c\u7d22\u975e\u5e38\u4e4b\u7f13\u6162\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528 `RipgrepSearch` \u5728\u9879\u76ee\u4e2d\u641c\u7d22\u6587\u4ef6\u3002\u53ef\u4ee5\u901a\u8fc7 Homebrew \u5b89\u88c5\uff1a\n\n```bash\nbrew install ripgrep\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u5b89\u88c5\u5b8c\u6210\u540e\u5373\u53ef\u5728AutoDev Composer\u4e2d\u4f7f\u7528\u8be5\u529f\u80fd\u3002"})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>a});var s=t(6540);const r={},o=s.createContext(r);function i(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);