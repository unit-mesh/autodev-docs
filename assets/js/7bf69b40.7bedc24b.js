"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2461],{8453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>r});var c=s(6540);const l={},t=c.createContext(l);function i(e){const n=c.useContext(t);return c.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),c.createElement(t.Provider,{value:n},e.children)}},9356:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>a,frontMatter:()=>i,metadata:()=>c,toc:()=>d});const c=JSON.parse('{"id":"customize/custom-llm-server","title":"\u81ea\u5b9a\u4e49\u5927\u6a21\u578b\u670d\u52a1\u5668","description":"\u81ea\u5b9a\u4e49\u5927\u6a21\u578b\u670d\u52a1\u5668\u793a\u4f8b","source":"@site/i18n/zh-Hans/docusaurus-plugin-content-docs/current/customize/custom-llm-server.md","sourceDirName":"customize","slug":"/customize/custom-llm-server","permalink":"/customize/custom-llm-server","draft":false,"unlisted":false,"editUrl":"https://github.com/unit-mesh/auto-dev/tree/master/docs/docs/customize/custom-llm-server.md","tags":[],"version":"current","frontMatter":{"title":"\u81ea\u5b9a\u4e49\u5927\u6a21\u578b\u670d\u52a1\u5668"},"sidebar":"customizeSidebar","previous":{"title":"\u529f\u80fd\u5b9a\u5236","permalink":"/customize/"},"next":{"title":"\u81ea\u5b9a\u4e49\u6587\u6863\u751f\u6210","permalink":"/customize/custom-living-documentation"}}');var l=s(4848),t=s(8453);const i={title:"\u81ea\u5b9a\u4e49\u5927\u6a21\u578b\u670d\u52a1\u5668"},r="\u81ea\u5b9a\u4e49\u5927\u6a21\u578b\u670d\u52a1\u5668",o={},d=[{value:"\u81ea\u5b9a\u4e49\u5927\u6a21\u578b\u670d\u52a1\u5668\u793a\u4f8b",id:"\u81ea\u5b9a\u4e49\u5927\u6a21\u578b\u670d\u52a1\u5668\u793a\u4f8b",level:2},{value:"DeepSeek AI \u793a\u4f8b",id:"deepseek-ai-\u793a\u4f8b",level:3},{value:"\u96f6\u4e00\u4e07\u7269 \u793a\u4f8b",id:"\u96f6\u4e00\u4e07\u7269-\u793a\u4f8b",level:3},{value:"ChatGLM \u793a\u4f8b",id:"chatglm-\u793a\u4f8b",level:3},{value:"Moonshot AI \u793a\u4f8b",id:"moonshot-ai-\u793a\u4f8b",level:3},{value:"\u81ea\u5b9a\u4e49\u54cd\u5e94\u683c\u5f0f",id:"\u81ea\u5b9a\u4e49\u54cd\u5e94\u683c\u5f0f",level:2},{value:"\u81ea\u5b9a\u4e49\u8bf7\u6c42\u683c\u5f0f",id:"\u81ea\u5b9a\u4e49\u8bf7\u6c42\u683c\u5f0f",level:2},{value:"\u81ea\u5b9a\u4e49\u8bf7\u6c42\uff08\u8bf7\u6c42\u5934/\u8bf7\u6c42\u4f53/\u6d88\u606f\u952e\uff09",id:"\u81ea\u5b9a\u4e49\u8bf7\u6c42\u8bf7\u6c42\u5934\u8bf7\u6c42\u4f53\u6d88\u606f\u952e",level:3}];function h(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"\u81ea\u5b9a\u4e49\u5927\u6a21\u578b\u670d\u52a1\u5668",children:"\u81ea\u5b9a\u4e49\u5927\u6a21\u578b\u670d\u52a1\u5668"})}),"\n",(0,l.jsx)(n.h2,{id:"\u81ea\u5b9a\u4e49\u5927\u6a21\u578b\u670d\u52a1\u5668\u793a\u4f8b",children:"\u81ea\u5b9a\u4e49\u5927\u6a21\u578b\u670d\u52a1\u5668\u793a\u4f8b"}),"\n",(0,l.jsx)(n.h3,{id:"deepseek-ai-\u793a\u4f8b",children:"DeepSeek AI \u793a\u4f8b"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u81ea\u5b9a\u4e49\u54cd\u5e94\u7c7b\u578b\uff1aSSE"}),"\n",(0,l.jsxs)(n.li,{children:["\u81ea\u5b9a\u4e49\u5f15\u64ce\u670d\u52a1\u5668\uff1a",(0,l.jsx)(n.a,{href:"https://api.deepseek.com/v1/chat/completions",children:"https://api.deepseek.com/v1/chat/completions"})]}),"\n",(0,l.jsx)(n.li,{children:"\u8bf7\u6c42\u4f53\u683c\u5f0f\uff1a"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{ "customFields": {"model": "deepseek-chat", "stream": true} }\n'})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u54cd\u5e94\u683c\u5f0f\uff1a"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"$.choices[0].delta.content \n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u96f6\u4e00\u4e07\u7269-\u793a\u4f8b",children:"\u96f6\u4e00\u4e07\u7269 \u793a\u4f8b"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u81ea\u5b9a\u4e49\u54cd\u5e94\u7c7b\u578b\uff1aSSE"}),"\n",(0,l.jsxs)(n.li,{children:["\u81ea\u5b9a\u4e49\u5f15\u64ce\u670d\u52a1\u5668\uff1a",(0,l.jsx)(n.a,{href:"https://api.lingyiwangwu.com/v1/chat/completions",children:"https://api.lingyiwangwu.com/v1/chat/completions"})]}),"\n",(0,l.jsx)(n.li,{children:"\u8bf7\u6c42\u4f53\u683c\u5f0f\uff1a"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{ "customFields": {"model": "yi-34b-chat", "stream": true} }\n'})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u54cd\u5e94\u683c\u5f0f\uff1a"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"$.choices[0].delta.content \n"})}),"\n",(0,l.jsx)(n.h3,{id:"chatglm-\u793a\u4f8b",children:"ChatGLM \u793a\u4f8b"}),"\n",(0,l.jsxs)(n.p,{children:["\u66f4\u591a\u7ec6\u8282\u8bf7\u53c2\u8003\uff1a",(0,l.jsx)(n.a,{href:"https://github.com/unit-mesh/auto-dev/issues/90",children:"#90"})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u81ea\u5b9a\u4e49\u54cd\u5e94\u7c7b\u578b\uff1aSSE"}),"\n",(0,l.jsxs)(n.li,{children:["\u81ea\u5b9a\u4e49\u5f15\u64ce\u670d\u52a1\u5668\uff1a",(0,l.jsx)(n.a,{href:"https://open.bigmodel.cn/api/paas/v4/chat/completions",children:"https://open.bigmodel.cn/api/paas/v4/chat/completions"})]}),"\n",(0,l.jsx)(n.li,{children:"\u8bf7\u6c42\u4f53\u683c\u5f0f\uff1a"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{ "customFields": {"model": "glm-4", "stream": true} }\n'})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u54cd\u5e94\u683c\u5f0f\uff1a"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"$.choices[0].delta.content \n"})}),"\n",(0,l.jsx)(n.h3,{id:"moonshot-ai-\u793a\u4f8b",children:"Moonshot AI \u793a\u4f8b"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u81ea\u5b9a\u4e49\u54cd\u5e94\u7c7b\u578b\uff1aSSE"}),"\n",(0,l.jsxs)(n.li,{children:["\u81ea\u5b9a\u4e49\u5f15\u64ce\u670d\u52a1\u5668\uff1a",(0,l.jsx)(n.a,{href:"https://api.moonshot.cn/v1/chat/completions",children:"https://api.moonshot.cn/v1/chat/completions"})]}),"\n",(0,l.jsx)(n.li,{children:"\u8bf7\u6c42\u4f53\u683c\u5f0f\uff1a"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{ "customFields": {"model": "moonshot-v1-8k", "stream": true } }\n'})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u54cd\u5e94\u683c\u5f0f\uff1a"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"$.choices[0].delta.content\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u81ea\u5b9a\u4e49\u54cd\u5e94\u683c\u5f0f",children:"\u81ea\u5b9a\u4e49\u54cd\u5e94\u683c\u5f0f"}),"\n",(0,l.jsxs)(n.p,{children:["\u6211\u4eec\u4f7f\u7528 ",(0,l.jsx)(n.a,{href:"https://github.com/json-path/JsonPath",children:"JsonPath"})," \u6765\u89e3\u6790\u54cd\u5e94\uff0c\n\u76ee\u524d\u4ec5\u63d0\u53d6\u7b2c\u4e00\u4e2a\u9009\u9879\u7684\u54cd\u5e94\u6d88\u606f\u3002\n\u5982\u679c\u60a8\u7684\u54cd\u5e94\u683c\u5f0f\u5982\u4e0b\uff1a"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n  "id": "chatcmpl-123",\n  "object": "chat.completion.chunk",\n  "created": 1677652288,\n  "model": "gpt-3.5-turbo",\n  "choices": [{\n    "index": 0,\n    "delta": {\n      "content": "Hello"\n    },\n    "finish_reason": "stop"\n  }]\n}\n'})}),"\n",(0,l.jsxs)(n.p,{children:["\u60a8\u9700\u8981\u5c06",(0,l.jsx)(n.code,{children:"\u54cd\u5e94\u683c\u5f0f"}),"\u8bbe\u7f6e\u4e3a\uff1a"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"$.choices[0].message.delta.content\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u81ea\u5b9a\u4e49\u8bf7\u6c42\u683c\u5f0f",children:"\u81ea\u5b9a\u4e49\u8bf7\u6c42\u683c\u5f0f"}),"\n",(0,l.jsx)(n.p,{children:"\u4ec5\u652f\u6301\u7c7b\u4f3cOpenAI\u7684\u8bf7\u6c42\u53c2\u6570\u683c\u5f0f\n\u4ec5\u652f\u6301\u65e0\u9700\u52a0\u5bc6\u5bc6\u94a5\u7684HTTP\u8bf7\u6c42\uff08\u5982WebSocket\uff09"}),"\n",(0,l.jsx)(n.h3,{id:"\u81ea\u5b9a\u4e49\u8bf7\u6c42\u8bf7\u6c42\u5934\u8bf7\u6c42\u4f53\u6d88\u606f\u952e",children:"\u81ea\u5b9a\u4e49\u8bf7\u6c42\uff08\u8bf7\u6c42\u5934/\u8bf7\u6c42\u4f53/\u6d88\u606f\u952e\uff09"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsxs)(n.strong,{children:["\u91cd\u8981\u63d0\u793a\uff1a\u5728\u672c\u9879\u76ee\u4e2d\uff0cmessageKey\u4e0eOpenAI\u4e0d\u517c\u5bb9\uff1amessageKeys: ",(0,l.jsx)(n.code,{children:'{ { "content": "content" } }'}),"\u662f\u5fc5\u9700\u7684"]})," ",(0,l.jsx)(n.em,{children:"\u6211\u4eec\u53ef\u80fd\u4f1a\u5728\u672a\u6765\u4fee\u590d\u8fd9\u4e2a\u95ee\u9898"})]}),"\n",(0,l.jsx)(n.p,{children:"\u5982\u679c\u60a8\u7684LLM\u670d\u52a1\u5668\u9700\u8981\u81ea\u5b9a\u4e49\u8bf7\u6c42\u683c\u5f0f\uff0c\u53ef\u4ee5\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u901a\u8fc7",(0,l.jsx)(n.code,{children:"customFields"}),"\u6dfb\u52a0\u8bf7\u6c42\u4f53\u9876\u5c42\u5b57\u6bb5"]}),"\n",(0,l.jsxs)(n.li,{children:["\u901a\u8fc7",(0,l.jsx)(n.code,{children:"customHeaders"}),"\u6dfb\u52a0\u81ea\u5b9a\u4e49\u8bf7\u6c42\u5934"]}),"\n",(0,l.jsxs)(n.li,{children:["\u901a\u8fc7",(0,l.jsx)(n.code,{children:"messageKeys"}),"\u81ea\u5b9a\u4e49\u6d88\u606f\u952e\uff08\u53ef\u9009\uff09"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u4f8b\u5982\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{ "customFields": {"user": "12345", "model":"model-name", "stream": true},  "messageKeys": { "content": "content" }}\n'})}),"\n",(0,l.jsx)(n.p,{children:"\u6216\u5305\u542b\u81ea\u5b9a\u4e49\u8bf7\u6c42\u5934\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n  "customHeaders": { "CustomHeader": "my-value" },\n  "customFields": {"user": "12345", "model": "gpt-4"},\n  "messageKeys": {"role": "role", "content": "message"}\n}\n'})}),"\n",(0,l.jsx)(n.p,{children:"\u751f\u6210\u7684\u8bf7\u6c42\u5934\u5c06\u4f1a\u662f\uff08\u539f\u59cb\u5934\u4fe1\u606f\u5df2\u7701\u7565\uff09\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-http-request",children:"POST https://your.server.com/path\n\nCustomHeader: my-value\n...(\u5176\u4ed6\u8bf7\u6c42\u5934)\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u8bf7\u6c42\u4f53\u5c06\u4f1a\u662f\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n  "user": "12345",\n  "model": "gpt-4",\n  "messages": [\n    {\n      "role": "user",\n      "message": "..."\n    }\n  ]\n}\n'})})]})}function a(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}}}]);